<!-- Generated by SpecStory -->

<!-- cursor Session 234513eb-6e1c-48c1-b7b8-46f18cd7c452 (2025-10-25 05:54Z) -->

# Kubernetes command troubleshooting for ks-core (2025-10-25 05:54Z)

_**User (2025-10-25 02:44Z)**_

[root@k8s-master-gz ~]# 
[root@k8s-master-gz ~]# ^[[200~kubectl logs -n kubesphere-system -l app=ks-installer -f~
-bash: $'\E[200~kubectl': command not found
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
changed: [localhost] => (item={'ns': 'kubesphere-system', 'kind': 'deployments', 'resource': 'ks-console', 'release': 'ks-core'})
changed: [localhost] => (item={'ns': 'kubesphere-system', 'kind': 'deployments', 'resource': 'ks-controller-manager', 'release': 'ks-core'})
changed: [localhost] => (item={'ns': 'kubesphere-system', 'kind': 'validatingwebhookconfigurations', 'resource': 'users.iam.kubesphere.io', 'release': 'ks-core'})
changed: [localhost] => (item={'ns': 'kubesphere-system', 'kind': 'validatingwebhookconfigurations', 'resource': 'resourcesquotas.quota.kubesphere.io', 'release': 'ks-core'})
changed: [localhost] => (item={'ns': 'kubesphere-system', 'kind': 'validatingwebhookconfigurations', 'resource': 'network.kubesphere.io', 'release': 'ks-core'})
changed: [localhost] => (item={'ns': 'kubesphere-system', 'kind': 'validatingwebhookconfigurations', 'resource': 'cluster.kubesphere.io', 'release': 'ks-core'})
failed: [localhost] (item={'ns': 'kubesphere-system', 'kind': 'users.iam.kubesphere.io', 'resource': 'admin', 'release': 'ks-core'}) => {"ansible_loop_var": "item", "changed": true, "cmd": "/usr/local/bin/kubectl -n kubesphere-system annotate --overwrite users.iam.kubesphere.io admin meta.helm.sh/release-name=ks-core && /usr/local/bin/kubectl -n kubesphere-system annotate --overwrite users.iam.kubesphere.io admin meta.helm.sh/release-namespace=kubesphere-system && /usr/local/bin/kubectl -n kubesphere-system label --overwrite users.iam.kubesphere.io admin app.kubernetes.io/managed-by=Helm\n", "delta": "0:00:00.183923", "end": "2025-10-25 13:12:28.752755", "failed_when_result": true, "item": {"kind": "users.iam.kubesphere.io", "ns": "kubesphere-system", "release": "ks-core", "resource": "admin"}, "msg": "non-zero return code", "rc": 1, "start": "2025-10-25 13:12:28.568832", "stderr": "Error from server (InternalError): Internal error occurred: failed calling webhook \"users.iam.kubesphere.io\": failed to call webhook: Post \"https://ks-controller-manager.kubesphere-system.svc:443/validate-email-iam-kubesphere-io-v1alpha2?timeout=30s\": service \"ks-controller-manager\" not found", "stderr_lines": ["Error from server (InternalError): Internal error occurred: failed calling webhook \"users.iam.kubesphere.io\": failed to call webhook: Post \"https://ks-controller-manager.kubesphere-system.svc:443/validate-email-iam-kubesphere-io-v1alpha2?timeout=30s\": service \"ks-controller-manager\" not found"], "stdout": "", "stdout_lines": []}

PLAY RECAP *********************************************************************
localhost                  : ok=15   changed=9    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   

ä»€ä¹ˆé—®é¢˜


---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç”¨æˆ·é‡åˆ°äº†ä¸€ä¸ª KubeSphere å®‰è£…è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚è®©æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªé”™è¯¯ä¿¡æ¯ï¼š

é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼š
```
Error from server (InternalError): Internal error occurred: failed calling webhook "users.iam.kubesphere.io": failed to call webhook: Post "https://ks-controller-manager.kubesphere-system.svc:443/validate-email-iam-kubesphere-io-v1alpha2?timeout=30s": service "ks-controller-manager" not found
```

è¿™ä¸ªé”™è¯¯è¡¨æ˜ï¼š
1. åœ¨å°è¯•ä¸º admin ç”¨æˆ·æ·»åŠ æ³¨è§£å’Œæ ‡ç­¾æ—¶å¤±è´¥
2. å¤±è´¥åŸå› æ˜¯ webhook è°ƒç”¨å¤±è´¥
3. webhook å¤±è´¥çš„æ ¹æœ¬åŸå› æ˜¯ service "ks-controller-manager" æœªæ‰¾åˆ°

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ KubeSphere å®‰è£…è¿‡ç¨‹ä¸­çš„æ—¶åºé—®é¢˜ã€‚åœ¨å°è¯•ä¿®æ”¹ admin ç”¨æˆ·èµ„æºæ—¶ï¼Œvalidatingwebhook æ­£åœ¨å·¥ä½œï¼Œä½†æ˜¯ ks-controller-manager æœåŠ¡è¿˜æ²¡æœ‰å®Œå…¨å°±ç»ªã€‚

è®©æˆ‘å…ˆçœ‹ä¸€ä¸‹ç”¨æˆ·å½“å‰æ‰“å¼€çš„æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ `fix-kubesphere-install.sh` å’Œ `è¯¦ç»†å®‰è£…KubeSphereæ•™ç¨‹.md`ï¼Œçœ‹çœ‹æ˜¯å¦å·²ç»æœ‰ç›¸å…³çš„è§£å†³æ–¹æ¡ˆã€‚</details></think>

---

æ ¹æ®æ‚¨æä¾›çš„æ—¥å¿—ï¼Œè¿™æ˜¯ä¸€ä¸ª KubeSphere å®‰è£…è¿‡ç¨‹ä¸­å¸¸è§çš„**æ—¶åºé—®é¢˜**ã€‚

## é—®é¢˜åˆ†æ

é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼š
```
Error from server (InternalError): failed calling webhook "users.iam.kubesphere.io": 
Post "https://ks-controller-manager.kubesphere-system.svc:443/...": 
service "ks-controller-manager" not found
```

**æ ¹æœ¬åŸå› **ï¼š
- å®‰è£…ç¨‹åºå°è¯•ä¸º `admin` ç”¨æˆ·æ·»åŠ  Helm æ³¨è§£å’Œæ ‡ç­¾
- æ­¤æ“ä½œè§¦å‘äº† validatingwebhook éªŒè¯
- ä½†æ˜¯ `ks-controller-manager` æœåŠ¡è¿˜æœªå®Œå…¨åˆ›å»º/å°±ç»ª
- å¯¼è‡´ webhook æ— æ³•è°ƒç”¨ï¼Œæ“ä½œå¤±è´¥

## è§£å†³æ–¹æ¡ˆ

è®©æˆ‘æŸ¥çœ‹ä¸€ä¸‹æ‚¨çš„ä¿®å¤è„šæœ¬ï¼Œçœ‹çœ‹æ˜¯å¦å·²ç»æœ‰é’ˆå¯¹è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼š

---

Tool use: **read_file**

Read file: f:\äº‘è®¡ç®—æ¶æ„ç›¸å…³\å­¦ä¹ æ–‡æ¡£æ–¹å‘ç›¸å…³\å®‰è£…\fix-kubesphere-install.sh

---

Tool use: **read_file**

Read file: f:\äº‘è®¡ç®—æ¶æ„ç›¸å…³\å­¦ä¹ æ–‡æ¡£æ–¹å‘ç›¸å…³\å®‰è£…\è¯¦ç»†å®‰è£…KubeSphereæ•™ç¨‹.md

---

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œæˆ‘çœ‹åˆ°äº†æ–‡æ¡£å’Œè„šæœ¬ã€‚ç°åœ¨è®©æˆ‘åˆ†æç”¨æˆ·é‡åˆ°çš„å…·ä½“é—®é¢˜ã€‚

ä»æ—¥å¿—æ¥çœ‹ï¼Œé—®é¢˜æ˜¯ï¼š
1. å®‰è£…ç¨‹åºåœ¨å°è¯•ç»™ admin ç”¨æˆ·æ·»åŠ  Helm æ³¨è§£å’Œæ ‡ç­¾
2. è§¦å‘äº† validatingwebhook
3. ä½†æ˜¯ ks-controller-manager æœåŠ¡è¿˜æœªåˆ›å»º
4. å¯¼è‡´ webhook è°ƒç”¨å¤±è´¥

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ—¶åºé—®é¢˜ã€‚è®©æˆ‘ç»§ç»­æŸ¥çœ‹æ–‡æ¡£ä¸­æ˜¯å¦æœ‰ç›¸å…³çš„è§£å†³æ–¹æ¡ˆã€‚</details></think>

---

æ ¹æ®æ‚¨çš„æ—¥å¿—åˆ†æï¼Œè¿™æ˜¯ä¸€ä¸ª **KubeSphere å®‰è£…è¿‡ç¨‹ä¸­çš„æ—¶åºé—®é¢˜**ã€‚è®©æˆ‘ä¸ºæ‚¨æä¾›è§£å†³æ–¹æ¡ˆï¼š

## ğŸ” é—®é¢˜åŸå› 

æ‚¨çš„é”™è¯¯ä¿¡æ¯ï¼š
```
service "ks-controller-manager" not found
```

è¿™è¯´æ˜ï¼š
1. å®‰è£…ç¨‹åºæ­£åœ¨æ‰§è¡Œèµ„æºè¿ç§»åˆ° Helm ç®¡ç†ï¼ˆæ·»åŠ  Helm æ³¨è§£ï¼‰
2. ä½† `ks-controller-manager` æœåŠ¡è¿˜æœªåˆ›å»ºå®Œæˆ
3. å¯¼è‡´ validatingwebhook éªŒè¯å¤±è´¥

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šä¸´æ—¶ç¦ç”¨ Webhookï¼ˆæ¨èï¼‰

---

Tool use: **read_file**

Read file: f:\äº‘è®¡ç®—æ¶æ„ç›¸å…³\å­¦ä¹ æ–‡æ¡£æ–¹å‘ç›¸å…³\å®‰è£…\è¯¦ç»†å®‰è£…KubeSphereæ•™ç¨‹.md

---

<think><details><summary>Thought Process</summary>è®©æˆ‘ç»§ç»­æŸ¥æ‰¾æ–‡æ¡£ä¸­å…³äº webhook é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</details></think>

---

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ä¸´æ—¶åˆ é™¤æœ‰é—®é¢˜çš„ validatingwebhookï¼š

```bash
# åˆ é™¤å¯¼è‡´é—®é¢˜çš„ webhook
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io

# ç­‰å¾…å‡ ç§’é’Ÿ
sleep 5

# é‡æ–°è§¦å‘å®‰è£…è¿›ç¨‹ï¼ˆé‡å¯ installer podï¼‰
kubectl delete pod -n kubesphere-system -l app=ks-installer

# ç­‰å¾…æ–° pod å¯åŠ¨
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# æŸ¥çœ‹å®‰è£…æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

### æ–¹æ¡ˆäºŒï¼šç­‰å¾…æœåŠ¡åˆ›å»ºå®Œæˆåé‡è¯•

```bash
# 1. æ£€æŸ¥ ks-controller-manager éƒ¨ç½²çŠ¶æ€
kubectl get deployment -n kubesphere-system ks-controller-manager

# 2. ç­‰å¾… ks-controller-manager æœåŠ¡åˆ›å»º
echo "ç­‰å¾… ks-controller-manager æœåŠ¡åˆ›å»º..."
kubectl wait --for=condition=Available deployment/ks-controller-manager -n kubesphere-system --timeout=300s

# 3. éªŒè¯æœåŠ¡æ˜¯å¦å­˜åœ¨
kubectl get svc -n kubesphere-system ks-controller-manager

# 4. é‡å¯ installer pod é‡æ–°æ‰§è¡Œå®‰è£…
kubectl delete pod -n kubesphere-system -l app=ks-installer
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

### æ–¹æ¡ˆä¸‰ï¼šæ£€æŸ¥å½“å‰çŠ¶æ€å¹¶ç»§ç»­

```bash
# æŸ¥çœ‹å½“å‰æ‰€æœ‰ Pod çŠ¶æ€
kubectl get pods -n kubesphere-system

# æŸ¥çœ‹ ks-controller-manager éƒ¨ç½²æ˜¯å¦å­˜åœ¨
kubectl get deployment -n kubesphere-system

# æŸ¥çœ‹æœåŠ¡æ˜¯å¦å·²åˆ›å»º
kubectl get svc -n kubesphere-system

# æŸ¥çœ‹å®‰è£…é…ç½®
kubectl get cc -n kubesphere-system ks-installer -o yaml | tail -50
```

## ğŸ“‹ åç»­å»ºè®®

å¦‚æœé—®é¢˜è§£å†³åï¼Œå»ºè®®ä½¿ç”¨æ‚¨ç›®å½•ä¸­çš„ `fix-kubesphere-install.sh` è„šæœ¬æ¥å¤„ç†è¿™ç±»æ—¶åºé—®é¢˜ã€‚è¯¥è„šæœ¬å·²ç»åŒ…å«äº†æ›´å¥å£®çš„ç­‰å¾…æœºåˆ¶ã€‚

æ‚¨æƒ³å…ˆå°è¯•å“ªä¸ªæ–¹æ¡ˆï¼Ÿæˆ‘å»ºè®®ä»**æ–¹æ¡ˆä¸€ï¼ˆåˆ é™¤ webhookï¼‰**å¼€å§‹ï¼Œå› ä¸ºè¿™æ˜¯æœ€å¿«çš„è§£å†³æ–¹å¼ã€‚

---

_**User (2025-10-25 02:44Z)**_


Welcome to Alibaba Cloud Elastic Compute Service !

Activate the web console with: systemctl enable --now cockpit.socket

Last login: Sat Oct 25 13:54:17 2025 from 182.89.47.178
[root@k8s-master-gz ~]# kubectl get deployment -n kubesphere-system ks-controller-manager
Error from server (NotFound): deployments.apps "ks-controller-manager" not found
[root@k8s-master-gz ~]# kubectl wait --for=condition=Available deployment/ks-controller-manager -n kubesphere-system --timeout=300s
Error from server (NotFound): deployments.apps "ks-controller-manager" not found
[root@k8s-master-gz ~]# kubectl get svc -n kubesphere-system ks-controller-manager
Error from server (NotFound): services "ks-controller-manager" not found
[root@k8s-master-gz ~]# kubectl delete pod -n kubesphere-system -l app=ks-installer
kubectl logs -n kubesphere-system -l app=ks-installer -f
pod "ks-installer-f76b9659f-drzv9" deleted
Error from server (BadRequest): container "installer" in pod "ks-installer-f76b9659f-nqbq9" is waiting to start: ContainerCreating
[root@k8s-master-gz ~]# 


ä¸è¡Œ









---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç”¨æˆ·å°è¯•äº†æ–¹æ¡ˆäºŒï¼Œä½†æ˜¯å‘ç° `ks-controller-manager` éƒ¨ç½²æ ¹æœ¬ä¸å­˜åœ¨ã€‚ç„¶åé‡å¯äº† installer podï¼Œä½†æ–°çš„ pod è¿˜åœ¨ ContainerCreating çŠ¶æ€ã€‚

ç°åœ¨éœ€è¦ï¼š
1. ç­‰å¾… installer pod å®Œå…¨å¯åŠ¨
2. æŸ¥çœ‹å½“å‰æ•´ä½“çŠ¶æ€
3. æ£€æŸ¥æ˜¯å¦æ˜¯å®‰è£…è¿‡ç¨‹çš„æ­£å¸¸é˜¶æ®µ
4. å¦‚æœéœ€è¦ï¼Œå°è¯•æ–¹æ¡ˆä¸€ï¼ˆåˆ é™¤ webhookï¼‰

è®©æˆ‘æä¾›æ›´è¯¦ç»†çš„è¯Šæ–­å’Œè§£å†³æ­¥éª¤ã€‚</details></think>

---

å¥½çš„ï¼Œ`ks-controller-manager` è¿˜æœªåˆ›å»ºæ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºè¿™æ˜¯å®‰è£…è¿‡ç¨‹ä¸­åé¢æ‰ä¼šåˆ›å»ºçš„ç»„ä»¶ã€‚ç°åœ¨è®©æˆ‘ä»¬ç³»ç»Ÿåœ°è¯Šæ–­å’Œè§£å†³ï¼š

## ğŸ“Š å…ˆè¯Šæ–­å½“å‰çŠ¶æ€

```bash
# 1. ç­‰å¾…æ–°çš„ installer pod å®Œå…¨å¯åŠ¨ï¼ˆè¿™å¾ˆé‡è¦ï¼‰
echo "ç­‰å¾… installer pod å¯åŠ¨..."
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# 2. æŸ¥çœ‹æ‰€æœ‰ Pod çŠ¶æ€
kubectl get pods -n kubesphere-system

# 3. æŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²çŠ¶æ€
kubectl get deployments -n kubesphere-system

# 4. æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
kubectl get svc -n kubesphere-system

# 5. æŸ¥çœ‹å®‰è£…é…ç½®çŠ¶æ€
kubectl get cc -n kubesphere-system ks-installer -o yaml | grep -A 20 "status:"
```

## ğŸ”§ æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼šåˆ é™¤æœ‰é—®é¢˜çš„ Webhook

è¿™ä¸ªé”™è¯¯çš„æ ¹æœ¬åŸå› æ˜¯ webhook é…ç½®åœ¨æœåŠ¡åˆ›å»ºå‰å°±ç”Ÿæ•ˆäº†ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# åˆ é™¤æ‰€æœ‰å¯èƒ½å¯¼è‡´é—®é¢˜çš„ validatingwebhook
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io 2>/dev/null || true
kubectl delete validatingwebhookconfigurations resourcesquotas.quota.kubesphere.io 2>/dev/null || true
kubectl delete validatingwebhookconfigurations network.kubesphere.io 2>/dev/null || true
kubectl delete validatingwebhookconfigurations cluster.kubesphere.io 2>/dev/null || true

# ç¡®è®¤åˆ é™¤æˆåŠŸ
kubectl get validatingwebhookconfigurations | grep kubesphere

# ç°åœ¨é‡å¯ installer pod
kubectl delete pod -n kubesphere-system -l app=ks-installer

# ç­‰å¾… pod å®Œå…¨å¯åŠ¨
echo "ç­‰å¾… installer pod é‡æ–°å¯åŠ¨..."
sleep 10
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

## ğŸ” å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å®Œå…¨é‡æ–°å®‰è£…

---

Tool use: **read_file**

Read file: f:\äº‘è®¡ç®—æ¶æ„ç›¸å…³\å­¦ä¹ æ–‡æ¡£æ–¹å‘ç›¸å…³\å®‰è£…\è¯¦ç»†å®‰è£…KubeSphereæ•™ç¨‹.md

---

<think><details><summary>Thought Process</summary>ç”¨æˆ·é‡åˆ°äº†å®‰è£…å¤±è´¥çš„é—®é¢˜ã€‚è®©æˆ‘æä¾›ä¸€ä¸ªç»¼åˆçš„è¯Šæ–­å’Œé‡è£…æ–¹æ¡ˆã€‚</details></think>

---

å¦‚æœä¸Šé¢çš„ webhook åˆ é™¤æ–¹æ¡ˆä¸å·¥ä½œï¼Œå¯èƒ½éœ€è¦å®Œå…¨é‡æ–°å®‰è£…ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„é‡è£…è„šæœ¬ï¼š

```bash
# === å¿«é€Ÿè¯Šæ–­å’Œé‡è£…è„šæœ¬ ===

# é¦–å…ˆï¼Œåˆ é™¤æ‰€æœ‰ webhook é…ç½®
echo "=== æ­¥éª¤ 1: åˆ é™¤ Webhook é…ç½® ==="
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤æˆ–ä¸å­˜åœ¨"
kubectl delete validatingwebhookconfigurations resourcesquotas.quota.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤æˆ–ä¸å­˜åœ¨"
kubectl delete validatingwebhookconfigurations network.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤æˆ–ä¸å­˜åœ¨"
kubectl delete validatingwebhookconfigurations cluster.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤æˆ–ä¸å­˜åœ¨"

# æŸ¥çœ‹å½“å‰çŠ¶æ€
echo ""
echo "=== æ­¥éª¤ 2: æŸ¥çœ‹å½“å‰çŠ¶æ€ ==="
kubectl get pods -n kubesphere-system
echo ""
kubectl get cc -n kubesphere-system

# é‡å¯ installer
echo ""
echo "=== æ­¥éª¤ 3: é‡å¯ Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer
sleep 15

# ç­‰å¾… pod å°±ç»ª
echo "ç­‰å¾… installer pod å°±ç»ª..."
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# æŸ¥çœ‹æ—¥å¿—
echo ""
echo "=== æ­¥éª¤ 4: æŸ¥çœ‹å®‰è£…æ—¥å¿—ï¼ˆæŒ‰ Ctrl+C é€€å‡ºï¼‰==="
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

## ğŸ”„ å¦‚æœéœ€è¦å®Œå…¨é‡æ–°å®‰è£…

å¦‚æœåˆ é™¤ webhook åä»ç„¶å¤±è´¥ï¼Œæ‰§è¡Œå®Œå…¨é‡è£…ï¼š

```bash
# å®Œå…¨æ¸…ç†å¹¶é‡è£…
cd ~/kubesphere

# 1. æ¸…ç†ç°æœ‰å®‰è£…
kubectl delete -f cluster-configuration.yaml 2>/dev/null || true
kubectl delete -f kubesphere-installer.yaml 2>/dev/null || true

# 2. åˆ é™¤ namespaceï¼ˆè¿™ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ï¼‰
kubectl delete namespace kubesphere-system --timeout=120s 2>/dev/null || true

# 3. å¦‚æœ namespace å¡ä½ï¼Œå¼ºåˆ¶åˆ é™¤
if kubectl get namespace kubesphere-system &>/dev/null; then
    echo "å¼ºåˆ¶åˆ é™¤ namespace..."
    kubectl get namespace kubesphere-system -o json | \
    sed 's/"kubernetes"//' | \
    kubectl replace --raw /api/v1/namespaces/kubesphere-system/finalize -f - 2>/dev/null || true
fi

# 4. ç­‰å¾…æ¸…ç†å®Œæˆ
echo "ç­‰å¾…æ¸…ç†å®Œæˆ..."
sleep 10

# 5. é‡æ–°å®‰è£…
kubectl apply -f kubesphere-installer.yaml
sleep 5
kubectl apply -f cluster-configuration.yaml

# 6. ç­‰å¾… installer pod å¯åŠ¨
echo "ç­‰å¾… installer pod å¯åŠ¨..."
sleep 20
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# 7. æŸ¥çœ‹å®‰è£…æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

## ğŸ’¡ æ¨èï¼šä½¿ç”¨ä¿®å¤è„šæœ¬

æˆ–è€…ä½¿ç”¨æ‚¨ç›®å½•ä¸­çš„è‡ªåŠ¨åŒ–ä¿®å¤è„šæœ¬ï¼š

```bash
cd ~/kubesphere
bash fix-kubesphere-install.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†æ¸…ç†ã€ç­‰å¾…å’Œé‡æ–°å®‰è£…çš„æ‰€æœ‰æ­¥éª¤ã€‚

---

**ç°åœ¨è¯·æ‰§è¡Œç¬¬ä¸€ä¸ªè„šæœ¬ï¼ˆåˆ é™¤ webhook å¹¶é‡å¯ï¼‰**ï¼Œç­‰å¾… pod å°±ç»ªåæŸ¥çœ‹æ—¥å¿—ã€‚å¦‚æœè¿˜æ˜¯æŠ¥é”™ï¼Œå†æ‰§è¡Œå®Œå…¨é‡è£…è„šæœ¬ã€‚æ‚¨æƒ³æˆ‘å¸®æ‚¨åˆ›å»ºä¸€ä¸ªä¸€é”®æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶å—ï¼Ÿ

---

_**User (2025-10-25 02:44Z)**_

[root@k8s-master-gz ~]# kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s
pod/ks-installer-f76b9659f-nqbq9 condition met
[root@k8s-master-gz ~]# kubectl get pods -n kubesphere-system
NAME                           READY   STATUS             RESTARTS      AGE
ks-installer-f76b9659f-nqbq9   0/1     CrashLoopBackOff   7 (16s ago)   11m
[root@k8s-master-gz ~]# kubectl get deployments -n kubesphere-system
NAME           READY   UP-TO-DATE   AVAILABLE   AGE
ks-installer   0/1     1            0           61m
[root@k8s-master-gz ~]# kubectl get svc -n kubesphere-system
No resources found in kubesphere-system namespace.
[root@k8s-master-gz ~]# 
kubectl get svc -n kubesphere-system
No resources found in kubesphere-system namespace.
[root@k8s-master-gz ~]# kubectl get cc -n kubesphere-system ks-installer -o yaml | grep -A 20 "status:"
[root@k8s-master-gz ~]# 










çœ‹çœ‹

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç°åœ¨é—®é¢˜å¾ˆæ¸…æ¥šäº†ï¼š
1. `ks-installer` pod å¤„äº `CrashLoopBackOff` çŠ¶æ€
2. è™½ç„¶ `wait` å‘½ä»¤æ˜¾ç¤º `condition met`ï¼Œä½†å®é™…ä¸Š pod çŠ¶æ€æ˜¾ç¤º `READY 0/1` å’Œ `CrashLoopBackOff`
3. æ²¡æœ‰ä»»ä½•æœåŠ¡è¢«åˆ›å»º
4. `kubectl get cc -n kubesphere-system ks-installer -o yaml | grep -A 20 "status:"` æ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜å¯èƒ½ ClusterConfiguration æ²¡æœ‰ status æˆ–è€…æœ‰é—®é¢˜

è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œinstaller pod åœ¨å´©æºƒé‡å¯ã€‚æˆ‘éœ€è¦ï¼š
1. æŸ¥çœ‹ pod çš„è¯¦ç»†æ—¥å¿—ï¼Œäº†è§£å´©æºƒåŸå› 
2. æŸ¥çœ‹ pod çš„äº‹ä»¶å’Œæè¿°
3. æ£€æŸ¥ ClusterConfiguration æ˜¯å¦æ­£ç¡®åˆ›å»º

æœ€å¯èƒ½çš„åŸå› ï¼š
- YAML æ–‡ä»¶æœ‰é—®é¢˜
- é•œåƒæ‹‰å–å¤±è´¥
- æƒé™é—®é¢˜
- é…ç½®é”™è¯¯</details></think>

---

çœ‹åˆ°äº†ï¼`ks-installer` pod å¤„äº **CrashLoopBackOff** çŠ¶æ€ï¼Œè¿™è¯´æ˜å®¹å™¨å¯åŠ¨åç«‹å³å´©æºƒäº†ã€‚æˆ‘ä»¬éœ€è¦æŸ¥çœ‹å´©æºƒçš„åŸå› ã€‚

## ğŸ” è¯Šæ–­ Pod å´©æºƒåŸå› 

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# 1. æŸ¥çœ‹ pod çš„å´©æºƒæ—¥å¿—
kubectl logs -n kubesphere-system ks-installer-f76b9659f-nqbq9

# 2. å¦‚æœä¸Šé¢æ²¡æœ‰è¾“å‡ºï¼ŒæŸ¥çœ‹ä¸Šä¸€æ¬¡å´©æºƒçš„æ—¥å¿—
kubectl logs -n kubesphere-system ks-installer-f76b9659f-nqbq9 --previous

# 3. æŸ¥çœ‹ pod çš„è¯¦ç»†ä¿¡æ¯å’Œäº‹ä»¶
kubectl describe pod -n kubesphere-system ks-installer-f76b9659f-nqbq9

# 4. æ£€æŸ¥ ClusterConfiguration æ˜¯å¦å­˜åœ¨
kubectl get cc -n kubesphere-system

# 5. å¦‚æœå­˜åœ¨ï¼ŒæŸ¥çœ‹å®Œæ•´é…ç½®
kubectl get cc -n kubesphere-system ks-installer -o yaml
```

## ğŸ¯ å¸¸è§çš„ CrashLoopBackOff åŸå› 

æ ¹æ®ç»éªŒï¼Œæœ€å¯èƒ½çš„åŸå› æ˜¯ï¼š

### åŸå›  1ï¼šClusterConfiguration ä¸å­˜åœ¨æˆ–æ ¼å¼é”™è¯¯
```bash
# æ£€æŸ¥ ClusterConfiguration æ˜¯å¦å­˜åœ¨
kubectl get cc -n kubesphere-system ks-installer
```

### åŸå›  2ï¼šé•œåƒæ‹‰å–é—®é¢˜
```bash
# æ£€æŸ¥é•œåƒæ‹‰å–çŠ¶æ€
kubectl describe pod -n kubesphere-system ks-installer-f76b9659f-nqbq9 | grep -A 10 "Events:"
```

### åŸå›  3ï¼šCRD æœªæ­£ç¡®æ³¨å†Œ
```bash
# æ£€æŸ¥ CRD æ˜¯å¦å­˜åœ¨
kubectl get crd clusterconfigurations.installer.kubesphere.io
```

---

**è¯·å…ˆæ‰§è¡Œä¸Šé¢çš„è¯Šæ–­å‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯æŸ¥çœ‹æ—¥å¿—çš„å‘½ä»¤ï¼Œç„¶åæŠŠè¾“å‡ºå‘ç»™æˆ‘ã€‚** æ ¹æ®å…·ä½“çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šç»™æ‚¨ç²¾å‡†çš„è§£å†³æ–¹æ¡ˆã€‚

æœ€å…³é”®çš„æ˜¯è¿™ä¸¤ä¸ªå‘½ä»¤ï¼š
```bash
kubectl logs -n kubesphere-system ks-installer-f76b9659f-nqbq9 --previous
kubectl describe pod -n kubesphere-system ks-installer-f76b9659f-nqbq9 | tail -50
```

---

_**User (2025-10-25 02:44Z)**_

ç»™ä½ kubectl get svc -n kubesphere-system
No resources found in kubesphere-system namespace.
[root@k8s-master-gz ~]# kubectl get cc -n kubesphere-system ks-installer -o yaml | grep -A 20 "status:"
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system ks-installer-f76b9659f-nqbq9
2025-10-25T14:12:55+08:00 INFO     : shell-operator latest
2025-10-25T14:12:55+08:00 INFO     : HTTP SERVER Listening on 0.0.0.0:9115
2025-10-25T14:12:55+08:00 INFO     : Use temporary dir: /tmp/shell-operator
2025-10-25T14:12:55+08:00 INFO     : Initialize hooks manager ...
2025-10-25T14:12:55+08:00 INFO     : Search and load hooks ...
2025-10-25T14:12:55+08:00 INFO     : Load hook config from '/hooks/kubesphere/installRunner.py'
2025-10-25T14:12:55+08:00 INFO     : Load hook config from '/hooks/kubesphere/schedule.sh'
2025-10-25T14:12:55+08:00 INFO     : Initializing schedule manager ...
2025-10-25T14:12:55+08:00 INFO     : KUBE Init Kubernetes client
2025-10-25T14:12:55+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:12:55+08:00 INFO     : MAIN: run main loop
2025-10-25T14:12:55+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:12:55+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:12:55+08:00 INFO     : Running schedule manager ...
2025-10-25T14:12:55+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:12:55+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:12:55+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:12:55+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:12:58+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>æ‰¾åˆ°é—®é¢˜äº†ï¼é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºï¼š

```
ERROR: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
```

è¿™æ˜¯å› ä¸º metrics-server æœ‰é—®é¢˜æˆ–æœªå®‰è£…ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„ Kubernetes é—®é¢˜ã€‚

installer åœ¨å¯åŠ¨æ—¶å°è¯•è·å–é›†ç¾¤çš„ API åˆ—è¡¨ï¼Œä½† metrics-server æ²¡æœ‰æ­£ç¡®å“åº”ï¼Œå¯¼è‡´æ•´ä¸ªåˆå§‹åŒ–å¤±è´¥ã€‚

è§£å†³æ–¹æ¡ˆï¼š
1. æ£€æŸ¥ metrics-server çš„çŠ¶æ€
2. å¦‚æœ metrics-server æœ‰é—®é¢˜ï¼Œä¿®å¤æˆ–é‡å¯å®ƒ
3. æˆ–è€…ä¸´æ—¶ç¦ç”¨ metrics-server çš„ API ç»„

è®©æˆ‘æä¾›è¯¦ç»†çš„è¯Šæ–­å’Œä¿®å¤æ­¥éª¤ã€‚</details></think>

---

**æ‰¾åˆ°é—®é¢˜äº†ï¼** ğŸ¯

é”™è¯¯ä¿¡æ¯å¾ˆæ¸…æ¥šï¼š
```
ERROR: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
```

é—®é¢˜æ˜¯ **metrics-server æ²¡æœ‰æ­£å¸¸è¿è¡Œ**ï¼Œå¯¼è‡´ ks-installer æ— æ³•è·å–å®Œæ•´çš„ API åˆ—è¡¨è€Œå´©æºƒã€‚

## ğŸ” è¯Šæ–­ Metrics Server

```bash
# 1. æ£€æŸ¥ metrics-server çš„çŠ¶æ€
kubectl get pods -n kube-system | grep metrics

# 2. æ£€æŸ¥ metrics-server éƒ¨ç½²
kubectl get deployment -n kube-system metrics-server

# 3. æŸ¥çœ‹ apiservice çŠ¶æ€
kubectl get apiservice v1beta1.metrics.k8s.io
```

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šä¿®å¤ Metrics Serverï¼ˆæ¨èï¼‰

```bash
# 1. æŸ¥çœ‹ metrics-server çš„è¯¦ç»†çŠ¶æ€
kubectl get pods -n kube-system -l k8s-app=metrics-server

# 2. å¦‚æœ pod å­˜åœ¨ä½†ä¸å¥åº·ï¼ŒæŸ¥çœ‹æ—¥å¿—
kubectl logs -n kube-system -l k8s-app=metrics-server

# 3. å¦‚æœ metrics-server ä¸å­˜åœ¨æˆ–æœ‰é—®é¢˜ï¼Œé‡æ–°éƒ¨ç½²
# ä¸‹è½½ metrics-server é…ç½®ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼‰
wget https://mirror.ghproxy.com/https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml -O metrics-server.yaml

# æˆ–è€…ä½¿ç”¨æœ¬åœ°åˆ›å»ºï¼ˆæ·»åŠ å¿…è¦çš„å‚æ•°ï¼‰
cat > metrics-server.yaml <<'EOF'
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-app: metrics-server
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: system:aggregated-metrics-reader
rules:
- apiGroups:
  - metrics.k8s.io
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-app: metrics-server
  name: system:metrics-server
rules:
- apiGroups:
  - ""
  resources:
  - nodes/metrics
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server-auth-reader
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server:system:auth-delegator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: system:metrics-server
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:metrics-server
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: v1
kind: Service
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: https
  selector:
    k8s-app: metrics-server
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  selector:
    matchLabels:
      k8s-app: metrics-server
  strategy:
    rollingUpdate:
      maxUnavailable: 0
  template:
    metadata:
      labels:
        k8s-app: metrics-server
    spec:
      containers:
      - args:
        - --cert-dir=/tmp
        - --secure-port=4443
        - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
        - --kubelet-use-node-status-port
        - --metric-resolution=15s
        - --kubelet-insecure-tls
        image: registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.3
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /livez
            port: https
            scheme: HTTPS
          periodSeconds: 10
        name: metrics-server
        ports:
        - containerPort: 4443
          name: https
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /readyz
            port: https
            scheme: HTTPS
          initialDelaySeconds: 20
          periodSeconds: 10
        resources:
          requests:
            cpu: 100m
            memory: 200Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /tmp
          name: tmp-dir
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      serviceAccountName: metrics-server
      volumes:
      - emptyDir: {}
        name: tmp-dir
---
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    k8s-app: metrics-server
  name: v1beta1.metrics.k8s.io
spec:
  group: metrics.k8s.io
  groupPriorityMinimum: 100
  insecureSkipTLSVerify: true
  service:
    name: metrics-server
    namespace: kube-system
  version: v1beta1
  versionPriority: 100
EOF

# 4. éƒ¨ç½² metrics-server
kubectl apply -f metrics-server.yaml

# 5. ç­‰å¾… metrics-server å°±ç»ª
kubectl wait --for=condition=Available deployment/metrics-server -n kube-system --timeout=120s

# 6. éªŒè¯ metrics-server å·¥ä½œæ­£å¸¸
kubectl get apiservice v1beta1.metrics.k8s.io
# åº”è¯¥çœ‹åˆ° AVAILABLE åˆ—ä¸º True

# 7. æµ‹è¯• metrics API
kubectl top nodes
```

### æ–¹æ¡ˆäºŒï¼šé‡å¯å·²å­˜åœ¨çš„ Metrics Server

å¦‚æœ metrics-server å·²ç»å­˜åœ¨ä½†ä¸å·¥ä½œï¼š

```bash
# é‡å¯ metrics-server
kubectl rollout restart deployment/metrics-server -n kube-system

# ç­‰å¾…é‡å¯å®Œæˆ
kubectl rollout status deployment/metrics-server -n kube-system

# éªŒè¯ APIService çŠ¶æ€
kubectl get apiservice v1beta1.metrics.k8s.io
```

### ä¿®å¤åé‡å¯ KubeSphere Installer

```bash
# 1. ç­‰å¾… metrics-server å®Œå…¨å°±ç»ª
echo "ç­‰å¾… metrics-server å°±ç»ª..."
kubectl wait --for=condition=Available deployment/metrics-server -n kube-system --timeout=120s

# 2. éªŒè¯ API å¯è®¿é—®
kubectl get apiservice v1beta1.metrics.k8s.io

# 3. åˆ é™¤æ—§çš„ installer pod
kubectl delete pod -n kubesphere-system -l app=ks-installer

# 4. ç­‰å¾…æ–° pod å¯åŠ¨
sleep 15
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# 5. æŸ¥çœ‹æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

---

**è¯·å…ˆæ‰§è¡Œè¯Šæ–­å‘½ä»¤ï¼Œç„¶åæ ¹æ®æƒ…å†µé€‰æ‹©ä¿®å¤æ–¹æ¡ˆã€‚** æœ€å¯èƒ½çš„æƒ…å†µæ˜¯éœ€è¦éƒ¨ç½²æˆ–ä¿®å¤ metrics-serverã€‚æˆ‘å·²ç»æä¾›äº†å®Œæ•´çš„ YAML é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†å›½å†…é•œåƒåœ°å€å’Œå¿…è¦çš„å‚æ•°ï¼ˆ`--kubelet-insecure-tls`ï¼‰ã€‚

---

_**User (2025-10-25 02:44Z)**_

2025-10-25T14:12:58+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# kubectl get pods -n kube-system | grep metrics
metrics-server-599c7579d4-k9jlz          0/1     Running            0              63m
metrics-server-79f7bf74d4-wngdm          0/1     InvalidImageName   0              62m
[root@k8s-master-gz ~]# kubectl get deployment -n kube-system metrics-server
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
metrics-server   0/1     1            0           63m
[root@k8s-master-gz ~]# kubectl get apiservice v1beta1.metrics.k8s.io
NAME                     SERVICE                      AVAILABLE                  AGE
v1beta1.metrics.k8s.io   kube-system/metrics-server   False (MissingEndpoints)   64m
[root@k8s-master-gz ~]# ç»™ä½ 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>çœ‹åˆ°é—®é¢˜äº†ï¼æœ‰ä¸¤ä¸ª metrics-server podï¼š
1. `metrics-server-599c7579d4-k9jlz` - çŠ¶æ€æ˜¯ Running ä½† READY æ˜¯ 0/1
2. `metrics-server-79f7bf74d4-wngdm` - çŠ¶æ€æ˜¯ InvalidImageNameï¼ˆé•œåƒåç§°é”™è¯¯ï¼‰

API Service æ˜¾ç¤º `False (MissingEndpoints)`ï¼Œè¯´æ˜ metrics-server è™½ç„¶éƒ¨ç½²äº†ä½†æ²¡æœ‰å¥åº·çš„ç«¯ç‚¹ã€‚

éœ€è¦ï¼š
1. æŸ¥çœ‹å…·ä½“çš„é”™è¯¯æ—¥å¿—
2. æ£€æŸ¥é•œåƒé…ç½®
3. ä¿®å¤æˆ–é‡æ–°éƒ¨ç½² metrics-server</details></think>

---

**æ‰¾åˆ°é—®é¢˜äº†ï¼** ğŸ¯

çœ‹åˆ°æœ‰ä¸¤ä¸ª metrics-server podï¼š
- ä¸€ä¸ªæ˜¯ `Running` ä½†ä¸å¥åº·ï¼ˆ0/1ï¼‰
- ä¸€ä¸ªæ˜¯ `InvalidImageName`ï¼ˆé•œåƒåç§°é”™è¯¯ï¼‰

API Service æ˜¾ç¤º `False (MissingEndpoints)`ï¼Œè¯´æ˜ metrics-server æ²¡æœ‰å¥åº·çš„ç«¯ç‚¹ã€‚

## ğŸ” æŸ¥çœ‹è¯¦ç»†é”™è¯¯

```bash
# 1. æŸ¥çœ‹ Running çš„ pod æ—¥å¿—
kubectl logs -n kube-system metrics-server-599c7579d4-k9jlz

# 2. æŸ¥çœ‹ pod è¯¦ç»†ä¿¡æ¯
kubectl describe pod -n kube-system metrics-server-599c7579d4-k9jlz

# 3. æŸ¥çœ‹ deployment é…ç½®ï¼ˆçœ‹çœ‹é•œåƒæ˜¯ä»€ä¹ˆï¼‰
kubectl get deployment -n kube-system metrics-server -o yaml | grep -A 5 image:
```

## ğŸ”§ å¿«é€Ÿä¿®å¤æ–¹æ¡ˆ

ç›´æ¥åˆ é™¤æœ‰é—®é¢˜çš„ deployment å¹¶é‡æ–°éƒ¨ç½²ï¼š

```bash
# 1. åˆ é™¤æ—§çš„ metrics-server
kubectl delete deployment metrics-server -n kube-system
kubectl delete service metrics-server -n kube-system
kubectl delete apiservice v1beta1.metrics.k8s.io

# 2. ç­‰å¾…æ¸…ç†å®Œæˆ
sleep 5

# 3. åˆ›å»ºä¿®å¤ç‰ˆçš„ metrics-server é…ç½®
cat > /root/metrics-server-fix.yaml <<'EOF'
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-app: metrics-server
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
    rbac.authorization.k8s.io/aggregate-to-view: "true"
  name: system:aggregated-metrics-reader
rules:
- apiGroups:
  - metrics.k8s.io
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    k8s-app: metrics-server
  name: system:metrics-server
rules:
- apiGroups:
  - ""
  resources:
  - nodes/metrics
  verbs:
  - get
- apiGroups:
  - ""
  resources:
  - pods
  - nodes
  verbs:
  - get
  - list
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server-auth-reader
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server:system:auth-delegator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    k8s-app: metrics-server
  name: system:metrics-server
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:metrics-server
subjects:
- kind: ServiceAccount
  name: metrics-server
  namespace: kube-system
---
apiVersion: v1
kind: Service
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: https
  selector:
    k8s-app: metrics-server
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    k8s-app: metrics-server
  name: metrics-server
  namespace: kube-system
spec:
  selector:
    matchLabels:
      k8s-app: metrics-server
  strategy:
    rollingUpdate:
      maxUnavailable: 0
  template:
    metadata:
      labels:
        k8s-app: metrics-server
    spec:
      containers:
      - args:
        - --cert-dir=/tmp
        - --secure-port=4443
        - --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
        - --kubelet-use-node-status-port
        - --metric-resolution=15s
        - --kubelet-insecure-tls
        image: registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.3
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /livez
            port: https
            scheme: HTTPS
          periodSeconds: 10
        name: metrics-server
        ports:
        - containerPort: 4443
          name: https
          protocol: TCP
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /readyz
            port: https
            scheme: HTTPS
          initialDelaySeconds: 20
          periodSeconds: 10
        resources:
          requests:
            cpu: 100m
            memory: 200Mi
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 1000
        volumeMounts:
        - mountPath: /tmp
          name: tmp-dir
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      serviceAccountName: metrics-server
      volumes:
      - emptyDir: {}
        name: tmp-dir
---
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  labels:
    k8s-app: metrics-server
  name: v1beta1.metrics.k8s.io
spec:
  group: metrics.k8s.io
  groupPriorityMinimum: 100
  insecureSkipTLSVerify: true
  service:
    name: metrics-server
    namespace: kube-system
  version: v1beta1
  versionPriority: 100
EOF

# 4. åº”ç”¨æ–°é…ç½®
kubectl apply -f /root/metrics-server-fix.yaml

# 5. ç­‰å¾… metrics-server å°±ç»ªï¼ˆæœ€å¤šç­‰å¾… 2 åˆ†é’Ÿï¼‰
echo "ç­‰å¾… metrics-server éƒ¨ç½²..."
kubectl wait --for=condition=Available deployment/metrics-server -n kube-system --timeout=120s

# 6. éªŒè¯çŠ¶æ€
echo ""
echo "=== Metrics Server Pod çŠ¶æ€ ==="
kubectl get pods -n kube-system -l k8s-app=metrics-server

echo ""
echo "=== API Service çŠ¶æ€ ==="
kubectl get apiservice v1beta1.metrics.k8s.io

echo ""
echo "=== æµ‹è¯• Metrics API ==="
sleep 10
kubectl top nodes 2>/dev/null || echo "Metrics API è¿˜æœªå®Œå…¨å°±ç»ªï¼Œè¯·ç­‰å¾… 30 ç§’åå†è¯•"

# 7. é‡å¯ KubeSphere Installer
echo ""
echo "=== é‡å¯ KubeSphere Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

sleep 15
echo "ç­‰å¾… ks-installer pod å¯åŠ¨..."
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# 8. æŸ¥çœ‹å®‰è£…æ—¥å¿—
echo ""
echo "=== KubeSphere å®‰è£…æ—¥å¿—ï¼ˆæŒ‰ Ctrl+C é€€å‡ºï¼‰==="
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

---

<think><details><summary>Thought Process</summary>è¿™ä¸ªè„šæœ¬ä¼šï¼š
1. å®Œå…¨åˆ é™¤æœ‰é—®é¢˜çš„ metrics-server
2. éƒ¨ç½²ä¸€ä¸ªä¿®å¤ç‰ˆæœ¬ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼ŒåŒ…å«å¿…è¦çš„å‚æ•°ï¼‰
3. ç­‰å¾… metrics-server å°±ç»ª
4. éªŒè¯ API Service
5. é‡å¯ KubeSphere installer
6. æŸ¥çœ‹å®‰è£…æ—¥å¿—

ç”¨æˆ·åº”è¯¥ç›´æ¥å¤åˆ¶ç²˜è´´è¿™ä¸ªè„šæœ¬åˆ°ç»ˆç«¯æ‰§è¡Œã€‚</details></think>

---

_**User (2025-10-25 02:44Z)**_

çœ‹Last login: Sat Oct 25 14:17:48 2025 from 182.89.47.178
[root@k8s-master-gz ~]# kubectl logs -n kube-system metrics-server-599c7579d4-k9jlz
I1025 05:10:48.508409       1 serving.go:342] Generated self-signed cert (/tmp/apiserver.crt, /tmp/apiserver.key)
I1025 05:10:48.882583       1 requestheader_controller.go:169] Starting RequestHeaderAuthRequestController
I1025 05:10:48.882766       1 shared_informer.go:240] Waiting for caches to sync for RequestHeaderAuthRequestController
I1025 05:10:48.882876       1 configmap_cafile_content.go:201] "Starting controller" name="client-ca::kube-system::extension-apiserver-authentication::client-ca-file"
I1025 05:10:48.882966       1 shared_informer.go:240] Waiting for caches to sync for client-ca::kube-system::extension-apiserver-authentication::client-ca-file
I1025 05:10:48.883062       1 tlsconfig.go:240] "Starting DynamicServingCertificateController"
I1025 05:10:48.883112       1 dynamic_serving_content.go:131] "Starting controller" name="serving-cert::/tmp/apiserver.crt::/tmp/apiserver.key"
I1025 05:10:48.883193       1 configmap_cafile_content.go:201] "Starting controller" name="client-ca::kube-system::extension-apiserver-authentication::requestheader-client-ca-file"
I1025 05:10:48.883215       1 shared_informer.go:240] Waiting for caches to sync for client-ca::kube-system::extension-apiserver-authentication::requestheader-client-ca-file
I1025 05:10:48.883036       1 secure_serving.go:267] Serving securely on [::]:4443
W1025 05:10:48.883876       1 shared_informer.go:372] The sharedIndexInformer has started, run more than once is not allowed
I1025 05:10:48.983579       1 shared_informer.go:247] Caches are synced for RequestHeaderAuthRequestController 
I1025 05:10:48.983579       1 shared_informer.go:247] Caches are synced for client-ca::kube-system::extension-apiserver-authentication::requestheader-client-ca-file 
I1025 05:10:48.983779       1 shared_informer.go:247] Caches are synced for client-ca::kube-system::extension-apiserver-authentication::client-ca-file 
E1025 05:16:03.878809       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:16:03.895816       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:16:03.899723       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:16:04.410184       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:16:14.411076       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:16:18.876230       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:16:18.888090       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:16:18.889566       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:16:24.410784       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:16:24.414438       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:16:33.874985       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:16:33.879514       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:16:33.880942       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:16:34.410752       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:16:44.410221       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:16:48.886160       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:16:48.892218       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:16:48.897899       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:16:54.410591       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:17:03.874855       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:17:03.887846       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:17:03.891298       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:17:04.410466       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:17:14.410803       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:17:18.885772       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:17:18.896540       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:17:18.898057       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:17:24.411699       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:17:33.884911       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:17:33.888358       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:17:33.890125       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:17:34.410637       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:17:44.411557       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:17:48.890615       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:17:48.892507       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:17:48.894013       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:17:52.597550       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:17:54.410534       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:18:03.874028       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:18:03.883139       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:18:03.888028       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:18:04.410065       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:18:14.411555       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:18:18.876867       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:18:18.887606       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:18:18.890993       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:18:24.410891       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:18:33.877499       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:18:33.881156       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:18:33.883608       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:18:34.410911       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:18:44.410892       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:18:48.878790       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:18:48.881508       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:18:48.900096       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:18:54.411409       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:19:03.880514       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:19:03.888050       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:19:03.890531       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:19:04.411288       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:19:11.596414       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:19:14.410550       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:19:18.875284       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:19:18.884898       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:19:18.889119       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:19:24.411208       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:19:33.877826       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:19:33.879012       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:19:33.890235       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:19:34.410287       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:19:44.411422       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:19:48.875050       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:19:48.880564       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:19:48.892801       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:19:54.410994       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:20:03.884347       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:20:03.892075       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:20:03.897899       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:20:04.410812       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:20:14.410602       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:20:18.882173       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:20:18.883961       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:20:18.889485       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:20:24.410693       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:20:27.595639       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:20:33.894891       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:20:33.895984       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:20:33.896429       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:20:34.411125       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:20:44.411010       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:20:48.889061       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:20:48.889721       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:20:48.889791       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:20:54.410694       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:21:03.877043       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:21:03.886619       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:21:03.888046       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:21:04.410878       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:21:14.411181       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:21:18.873931       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:21:18.879784       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:21:18.882348       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:21:24.410315       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:21:33.876628       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:21:33.889951       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:21:33.890630       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:21:34.410992       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:21:44.410394       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:21:48.878171       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:21:48.881390       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:21:48.881796       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:21:49.595997       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:21:54.411547       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:22:03.876026       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:22:03.900370       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:22:03.901073       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:22:04.410435       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:22:14.410162       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:22:18.885288       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:22:18.893443       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:22:18.895244       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:22:24.411036       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:22:33.878300       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:22:33.878581       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:22:33.881149       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:22:34.410433       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:22:44.411054       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:22:48.882643       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:22:48.883769       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:22:48.893716       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:22:53.596130       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:22:54.410680       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:23:03.876779       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:23:03.884407       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:23:03.895244       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:23:04.410933       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:23:14.413529       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:23:18.881244       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:23:18.884695       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:23:18.892427       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:23:24.410605       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:23:33.880557       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:23:33.890065       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:23:33.897527       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:23:34.411166       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:23:44.410995       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:23:48.875699       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:23:48.888431       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:23:48.890343       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:23:54.411107       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:23:54.597411       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:24:03.876617       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:24:03.880487       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:24:03.900111       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:24:04.410512       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:24:14.411614       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:24:18.874440       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:24:18.884901       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:24:18.887874       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:24:24.410543       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:24:33.877239       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:24:33.888928       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:24:33.899904       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:24:34.411545       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:24:44.410869       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:24:48.877569       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:24:48.886158       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:24:48.897981       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:24:54.410842       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:25:03.879789       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:25:03.882397       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:25:03.889196       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:25:04.410318       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:25:07.596201       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:25:14.410412       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:25:18.874169       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:25:18.882167       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:25:18.886956       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:25:24.412769       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:25:33.879169       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:25:33.879462       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:25:33.881484       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:25:34.410713       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:25:44.410043       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:25:48.874842       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:25:48.877522       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:25:48.878895       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:25:54.411751       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:26:03.886985       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:26:03.895618       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:26:03.899347       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:26:04.410670       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:26:14.410961       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:26:18.882328       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:26:18.887278       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:26:18.895776       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:26:24.410256       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:26:29.596224       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:26:33.879041       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:26:33.891224       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:26:33.897808       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:26:34.411199       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:26:44.410441       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:26:48.881260       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:26:48.896150       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:26:48.900005       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:26:54.410533       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:27:03.877329       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:27:03.886966       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:27:03.890793       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:27:04.410864       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:27:14.411351       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:27:18.874092       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:27:18.885832       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:27:18.898881       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:27:24.410096       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:27:33.887434       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:27:33.897542       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:27:33.900903       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:27:34.411135       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:27:44.410755       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:27:48.877746       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:27:48.887442       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:27:48.889955       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:27:54.411992       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:27:57.595782       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:28:03.879165       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:28:03.894505       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:28:03.897110       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:28:04.410242       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:28:14.410913       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:28:18.878232       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:28:18.886371       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:28:18.900055       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:28:24.410779       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:28:33.884433       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:28:33.885926       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:28:33.890403       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:28:34.411098       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:28:44.410960       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:28:48.884439       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:28:48.896536       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:28:48.897592       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:28:54.410152       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:29:03.878321       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:29:03.881472       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:29:03.897944       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:29:04.410814       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:29:07.596404       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:29:14.410619       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:29:18.874136       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:29:18.885810       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:29:18.892325       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:29:24.410527       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:29:33.881860       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:29:33.891989       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:29:33.898720       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:29:34.410643       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:29:44.411047       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:29:48.882157       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:29:48.885707       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:29:48.897276       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:29:54.410224       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:30:03.885525       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:30:03.887403       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:30:03.889989       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:30:04.411214       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:30:14.410792       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:30:16.601844       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:30:18.880772       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:30:18.882239       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:30:18.891456       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:30:24.410922       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:30:33.873570       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:30:33.892140       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:30:33.896685       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:30:34.410618       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:30:44.410778       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:30:48.873571       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:30:48.881784       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:30:48.888637       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:30:54.411223       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:31:03.885060       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:31:03.890794       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:31:03.896625       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:31:04.411888       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:31:14.411371       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:31:18.876647       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:31:18.879765       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:31:18.880204       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:31:24.411071       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:31:33.887045       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:31:33.887534       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:31:33.889916       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:31:34.411009       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:31:37.595864       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:31:44.410436       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:31:48.878271       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:31:48.889877       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:31:48.893145       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:31:54.410265       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:32:03.877060       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:32:03.881102       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:32:03.898120       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:32:04.410905       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:32:14.410999       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:32:18.879554       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:32:18.891202       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:32:18.897863       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:32:24.410646       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:32:33.876846       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:32:33.878440       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:32:33.882260       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:32:34.410834       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:32:44.410331       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:32:48.879693       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:32:48.880911       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:32:48.896988       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:32:54.411627       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:33:01.596143       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:33:03.880436       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:33:03.887096       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:33:03.892924       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:33:04.410602       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:33:14.411235       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:33:18.875222       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:33:18.881967       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:33:18.882740       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:33:24.410676       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:33:33.889701       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:33:33.892275       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:33:33.895461       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:33:34.410252       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:33:44.411186       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:33:48.878699       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:33:48.881569       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:33:48.891561       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:33:54.410620       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:34:03.876979       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:34:03.883094       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:34:03.885652       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:34:04.411793       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:34:06.597066       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:34:14.411029       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:34:18.879171       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:34:18.893224       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:34:18.899688       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:34:24.411125       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:34:33.876500       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:34:33.882599       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:34:33.884476       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:34:34.410710       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:34:44.410624       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:34:48.874585       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:34:48.887367       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:34:48.887841       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:34:54.411405       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:35:03.877047       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:35:03.895344       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:35:03.899403       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:35:04.410615       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:35:08.597812       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:35:14.410255       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:35:18.876858       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:35:18.879438       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:35:18.892354       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:35:24.410995       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:35:33.875373       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:35:33.886364       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:35:33.886435       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:35:34.411305       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:35:44.410848       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:35:48.892846       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:35:48.895430       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:35:48.899323       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:35:54.410038       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:36:03.881060       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:36:03.886526       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:36:03.890512       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:36:04.411035       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:36:14.410002       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:36:14.600869       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:36:18.886043       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:36:18.887785       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:36:18.896319       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:36:24.410858       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:36:33.885405       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:36:33.890686       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:36:33.895981       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:36:34.411340       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:36:44.411150       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:36:48.880750       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:36:48.884549       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:36:48.887138       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:36:54.410906       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:37:03.874257       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:37:03.874652       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:37:03.883175       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:37:04.409957       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:37:14.410671       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:37:17.596081       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:37:18.883691       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:37:18.886339       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:37:18.902136       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:37:24.411453       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:37:33.875989       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:37:33.883960       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:37:33.897426       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:37:34.410459       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:37:44.411506       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:37:48.873818       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:37:48.883037       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:37:48.889810       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:37:54.411004       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:38:03.883209       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:38:03.897325       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:38:03.897510       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:38:04.410699       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:38:14.410206       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:38:18.886186       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:38:18.893163       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:38:18.898160       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:38:24.412719       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:38:26.598039       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:38:33.878857       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:38:33.884485       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:38:33.889968       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:38:34.411468       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:38:44.410586       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:38:48.881512       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:38:48.883048       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:38:48.888482       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:38:54.410495       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:39:03.886266       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:39:03.895078       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:39:03.900539       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:39:04.410909       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:39:14.411095       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:39:18.874694       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:39:18.891630       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:39:18.891789       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:39:24.410839       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:39:33.879727       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:39:33.884132       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:39:33.891603       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:39:34.410637       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:39:44.410902       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:39:48.883276       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:39:48.892340       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:39:48.893057       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:39:54.410613       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:39:54.597688       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:40:03.880211       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:40:03.886749       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:40:03.899567       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:40:04.410347       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:40:14.410285       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:40:18.883470       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:40:18.885792       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:40:18.890235       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:40:24.412182       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:40:33.876617       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:40:33.883804       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:40:33.886247       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:40:34.410905       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:40:44.410302       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:40:48.886277       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:40:48.886507       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:40:48.898246       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:40:54.410976       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:41:03.884460       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:41:03.894423       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:41:03.901734       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:41:04.410733       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:41:12.596696       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:41:14.411441       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:41:18.885474       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:41:18.893183       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:41:18.896733       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:41:24.410271       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:41:33.878346       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:41:33.888122       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:41:33.890310       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:41:34.410391       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:41:44.411192       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:41:48.878128       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:41:48.881803       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:41:48.897437       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:41:54.410566       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:42:03.880333       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:42:03.892887       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:42:03.898457       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:42:04.411488       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:42:14.410308       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:42:18.879927       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:42:18.882355       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:42:18.889121       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:42:24.410898       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:42:29.596353       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:42:33.877917       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:42:33.888030       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:42:33.898869       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:42:34.410588       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:42:44.410616       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:42:48.881191       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:42:48.881450       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:42:48.894914       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:42:54.409967       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:43:03.879530       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:43:03.886038       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:43:03.888889       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:43:04.410792       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:43:14.410986       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:43:18.888816       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:43:18.891679       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:43:18.896434       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:43:24.411146       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:43:33.877139       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:43:33.880033       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:43:33.900933       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:43:34.411372       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:43:44.410117       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:43:48.875012       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:43:48.894944       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:43:48.900137       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:43:54.410191       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:43:57.596092       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:44:03.878716       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:44:03.880791       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:44:03.899522       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:44:04.411638       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:44:14.414117       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:44:18.876627       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:44:18.880159       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:44:18.883043       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:44:24.410807       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:44:33.879033       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:44:33.884270       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:44:33.887254       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:44:34.410752       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:44:44.410491       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:44:48.881363       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:44:48.893884       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:44:48.897724       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:44:54.410369       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:45:03.873468       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:45:03.880336       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:45:03.891937       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:45:04.411211       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:45:14.410149       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:45:18.880273       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:45:18.881041       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:45:18.895074       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:45:24.409936       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:45:24.596877       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:45:33.884358       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:45:33.889234       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:45:33.896889       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:45:34.410349       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:45:44.410802       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:45:48.876405       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:45:48.889083       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:45:48.891323       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:45:54.410485       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:46:03.876875       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:46:03.881708       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:46:03.887636       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:46:04.411279       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:46:14.410214       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:46:18.880550       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:46:18.889614       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:46:18.898034       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:46:24.411175       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:46:33.879832       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:46:33.882406       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:46:33.896304       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:46:34.411075       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:46:44.411187       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:46:48.880864       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:46:48.891699       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:46:48.894401       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:46:51.596350       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:46:54.410224       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:47:03.888388       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:47:03.888719       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:47:03.894610       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:47:04.409953       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:47:14.410629       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:47:18.883446       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:47:18.888353       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:47:18.893886       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:47:24.410610       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:47:33.882662       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:47:33.883923       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:47:33.892275       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:47:34.410529       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:47:44.410688       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:47:48.878454       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:47:48.888339       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:47:48.898424       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:47:54.410156       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:48:03.877304       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:48:03.878834       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:48:03.884814       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:48:04.411579       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:48:08.598462       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:48:14.411061       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:48:18.877105       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:48:18.880365       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:48:18.899429       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:48:24.410641       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:48:33.878727       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:48:33.896666       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:48:33.897098       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:48:34.410734       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:48:44.410414       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:48:48.878767       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:48:48.883465       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:48:48.883747       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:48:54.411307       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:49:03.877138       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:49:03.894782       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:49:03.899685       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:49:04.411019       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:49:14.410321       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:49:18.886873       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:49:18.887283       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:49:18.897030       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:49:24.410225       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:49:33.873977       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:49:33.883538       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:49:33.893053       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:49:34.410699       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:49:35.596291       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:49:44.413328       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:49:48.876852       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:49:48.895571       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:49:48.897110       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:49:54.410945       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:50:03.875882       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:50:03.877551       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:50:03.881068       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:50:04.410327       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:50:14.410453       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:50:18.876323       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:50:18.887009       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:50:18.889453       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:50:24.410594       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:50:33.878757       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:50:33.894974       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:50:33.898726       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:50:34.411460       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:50:44.410002       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:50:48.879749       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:50:48.880134       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:50:48.898341       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:50:54.409869       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:51:03.889715       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:51:03.889717       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:51:03.890112       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:51:04.411175       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:51:04.597542       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:51:14.411268       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:51:18.876563       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:51:18.888228       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:51:18.901050       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:51:24.410970       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:51:33.879242       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:51:33.880575       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:51:33.886083       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:51:34.411372       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:51:44.410237       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:51:48.876450       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:51:48.887129       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:51:48.898704       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:51:54.410708       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:52:03.878649       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:52:03.888448       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:52:03.896163       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:52:04.411335       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:52:14.410331       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:52:18.877033       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:52:18.883118       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:52:18.896713       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:52:24.410341       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:52:32.597510       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:52:33.878271       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:52:33.888158       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:52:33.895989       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:52:34.410131       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:52:44.410857       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:52:48.884164       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:52:48.889789       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:52:48.898651       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:52:54.410856       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:53:03.874425       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:53:03.880465       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:53:03.881865       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:53:04.411181       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:53:14.410662       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:53:18.882331       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:53:18.886069       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:53:18.895607       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:53:24.411400       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:53:33.885704       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:53:33.890330       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:53:33.895235       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:53:34.410412       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:53:44.411459       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:53:48.879019       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:53:48.880409       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:53:48.883935       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:53:54.410683       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:54:02.597775       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:54:03.881766       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:54:03.891227       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:54:03.898254       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:54:04.410926       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:54:14.410584       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:54:18.885291       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:54:18.892197       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:54:18.892533       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:54:24.410444       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:54:33.881680       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:54:33.883101       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:54:33.890896       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:54:34.417000       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:54:44.410231       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:54:48.881053       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:54:48.886084       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:54:48.892995       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:54:54.410504       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:55:03.873949       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:55:03.882936       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:55:03.887371       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:55:04.410600       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:55:14.410526       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:55:17.596259       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:55:18.891247       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:55:18.896509       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:55:18.899160       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:55:24.410999       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:55:33.878290       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:55:33.879783       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:55:33.880474       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:55:34.410967       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:55:44.410535       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:55:48.876252       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:55:48.880913       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:55:48.897985       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:55:54.410672       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:56:03.873457       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:56:03.877495       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:56:03.880712       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:56:04.410615       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:56:14.410911       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:56:18.884031       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:56:18.887157       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:56:18.891441       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:56:24.410793       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:56:33.875297       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:56:33.876870       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:56:33.893603       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:56:34.411330       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:56:42.597607       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:56:44.410575       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:56:48.879210       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:56:48.883155       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:56:48.888648       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:56:54.410906       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:57:03.879974       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:57:03.883554       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:57:03.899432       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:57:04.410745       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:57:14.410116       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:57:18.877869       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:57:18.880505       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:57:18.897208       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:57:24.410862       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:57:33.878447       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:57:33.890723       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:57:33.891168       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:57:34.410910       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:57:44.410101       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:57:44.596300       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:57:48.876193       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:57:48.881937       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:57:48.891722       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:57:54.411287       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:58:03.877923       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:58:03.883592       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:58:03.895477       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:58:04.411360       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:58:14.411361       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:58:18.879634       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:58:18.891473       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:58:18.901026       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:58:24.411117       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:58:33.876529       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:58:33.886125       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:58:33.896624       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:58:34.410096       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:58:44.410693       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:58:45.595692       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:58:48.876108       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:58:48.886268       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:58:48.894881       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:58:54.410313       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:59:03.889933       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:59:03.890418       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:59:03.900705       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 05:59:04.410784       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:59:14.411680       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:59:18.881167       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:59:18.891075       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:59:18.894000       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:59:24.409985       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:59:33.878540       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:59:33.886102       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 05:59:33.894960       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 05:59:34.411232       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 05:59:44.410801       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 05:59:48.885577       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 05:59:48.896556       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 05:59:48.896927       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 05:59:54.410646       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:00:00.597139       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:00:03.878089       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:00:03.882800       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:00:03.894354       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:00:04.410746       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:00:14.411280       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:00:18.880424       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:00:18.883035       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:00:18.897474       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:00:24.411221       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:00:33.881037       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:00:33.881351       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:00:33.893458       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:00:34.410369       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:00:44.410947       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:00:48.881965       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:00:48.890788       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:00:48.895292       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:00:54.411041       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:01:03.879883       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:01:03.889368       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:01:03.894929       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:01:04.412651       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:01:14.410972       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:01:18.597087       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:01:18.876851       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:01:18.877089       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:01:18.899152       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:01:24.411252       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:01:33.877039       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:01:33.881734       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:01:33.884253       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:01:34.410747       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:01:44.410905       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:01:48.875922       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:01:48.887318       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:01:48.897391       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:01:54.410146       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:02:03.876695       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:02:03.879247       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:02:03.887175       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:02:04.410893       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:02:14.410714       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:02:18.874270       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:02:18.886848       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:02:18.897699       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:02:24.410596       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:02:33.875320       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:02:33.880854       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:02:33.887463       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:02:34.410703       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:02:43.596255       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:02:44.410880       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:02:48.885465       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:02:48.903226       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:02:48.905126       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:02:54.410500       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:03:03.874826       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:03:03.883557       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:03:03.884427       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:03:04.410521       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:03:14.410897       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:03:18.884827       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:03:18.886389       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:03:18.899848       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:03:24.410393       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:03:33.879401       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:03:33.885186       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:03:33.888848       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:03:34.411249       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:03:44.410444       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:03:48.874014       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:03:48.874221       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:03:48.895930       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:03:54.410446       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:04:03.873496       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:04:03.880982       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:04:03.886735       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:04:04.411028       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:04:07.595494       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:04:14.410907       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:04:18.879702       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:04:18.881681       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:04:18.891482       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:04:24.410500       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:04:33.875251       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:04:33.884981       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:04:33.895529       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:04:34.411067       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:04:44.410746       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:04:48.894772       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:04:48.895974       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:04:48.896200       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:04:54.411071       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:05:03.884724       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:05:03.900016       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:05:03.900063       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:05:04.411256       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:05:14.410229       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:05:18.877741       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:05:18.878205       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:05:18.880737       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:05:24.410771       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:05:33.885960       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:05:33.887332       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:05:33.891149       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:05:34.410973       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:05:37.596103       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:05:44.410906       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:05:48.874985       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:05:48.885120       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:05:48.890635       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:05:54.410659       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:06:03.884564       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:06:03.896490       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:06:03.901354       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:06:04.410328       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:06:14.412031       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:06:18.878465       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:06:18.890417       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:06:18.896925       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:06:24.410830       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:06:33.878777       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:06:33.885323       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:06:33.886087       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:06:34.411480       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:06:40.597625       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:06:44.414298       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:06:48.879439       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:06:48.880186       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:06:48.884077       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:06:54.411259       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:07:03.877577       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:07:03.891270       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:07:03.895024       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:07:04.411216       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:07:14.410324       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:07:18.883453       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:07:18.889098       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:07:18.898323       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:07:24.410869       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:07:33.880951       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:07:33.884464       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:07:33.885975       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:07:34.411094       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:07:44.410620       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:07:44.601455       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:07:48.877490       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:07:48.883131       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:07:48.888064       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:07:54.411152       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:08:03.880100       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:08:03.891007       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:08:03.893795       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:08:04.410871       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:08:14.410596       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:08:18.879505       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:08:18.890908       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:08:18.897701       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:08:24.410944       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:08:33.877369       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:08:33.883440       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:08:33.898284       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:08:34.410704       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:08:44.410906       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:08:46.598056       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:08:48.877524       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:08:48.883163       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:08:48.894780       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:08:54.410599       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:09:03.878527       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:09:03.880425       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:09:03.882906       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:09:04.411049       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:09:14.411092       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:09:18.883034       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:09:18.887339       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:09:18.887712       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:09:24.410230       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:09:33.888240       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:09:33.894938       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:09:33.895592       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:09:34.410411       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:09:44.411375       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:09:48.881083       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:09:48.892916       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:09:48.898718       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:09:50.597064       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:09:54.410437       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:10:03.874985       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:10:03.885936       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:10:03.892827       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:10:04.410616       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:10:14.410775       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:10:18.878066       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:10:18.883049       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:10:18.890548       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:10:24.411036       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:10:33.877078       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:10:33.883562       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:10:33.887036       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:10:34.410702       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:10:44.410535       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:10:48.878789       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:10:48.892319       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:10:48.900199       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:10:54.410427       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:11:03.882358       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:11:03.888557       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:11:03.895110       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:11:04.410802       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:11:12.597361       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:11:14.416342       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:11:18.884518       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:11:18.892777       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:11:18.899647       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:11:24.410281       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:11:33.893537       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:11:33.894588       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:11:33.895651       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:11:34.411172       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:11:44.412090       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:11:48.881078       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:11:48.896732       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:11:48.897157       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:11:54.410338       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:12:03.873808       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:12:03.876359       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:12:03.889206       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:12:04.410973       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:12:14.410688       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:12:18.876842       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:12:18.880733       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:12:18.901826       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:12:24.410838       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:12:24.597470       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:12:33.876435       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:12:33.880981       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:12:33.895540       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:12:34.410521       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:12:44.410913       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:12:48.875374       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:12:48.883428       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:12:48.897522       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:12:54.411474       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:13:03.889179       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:13:03.889376       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:13:03.889396       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:13:04.411192       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:13:14.410539       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:13:18.881090       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:13:18.881110       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:13:18.881430       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:13:24.410365       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:13:26.600132       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:13:33.880441       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:13:33.882963       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:13:33.885495       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:13:34.410172       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:13:44.410629       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:13:48.879041       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:13:48.911471       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:13:48.911898       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:13:54.410644       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:14:03.878710       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:14:03.884304       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:14:03.889291       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:14:04.410785       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:14:14.412169       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:14:18.876729       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:14:18.890570       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:14:18.890580       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:14:24.411053       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:14:33.880494       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:14:33.887114       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:14:33.897045       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:14:34.410104       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:14:44.410540       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:14:48.596725       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:14:48.877797       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:14:48.886500       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:14:48.891498       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:14:54.410613       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:15:03.876734       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:15:03.878542       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:15:03.890121       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:15:04.411130       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:15:14.410711       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:15:18.886815       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:15:18.894460       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:15:18.896854       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:15:24.410705       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:15:33.876996       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:15:33.883695       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:15:33.887242       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:15:34.410525       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:15:44.411372       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:15:48.876546       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:15:48.876722       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:15:48.899681       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:15:54.411016       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:16:03.892557       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:16:03.894595       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:16:03.899536       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:16:04.410567       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:16:14.410962       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:16:17.596526       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:16:18.875306       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:16:18.883060       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:16:18.886805       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:16:24.410958       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:16:33.873798       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:16:33.883773       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:16:33.894313       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:16:34.411568       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:16:44.411273       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:16:48.885692       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:16:48.892548       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:16:48.899355       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:16:54.410849       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:17:03.880957       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:17:03.889530       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:17:03.896364       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
I1025 06:17:04.410533       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:17:14.411300       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:17:18.878273       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:17:18.882921       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:17:18.896532       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:17:24.410437       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:17:29.595864       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:17:33.876260       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
E1025 06:17:33.880084       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:17:33.893072       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
I1025 06:17:34.410104       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
I1025 06:17:44.410937       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
E1025 06:17:48.881240       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-master-gz"
E1025 06:17:48.882674       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker01-gz"
E1025 06:17:48.888668       1 scraper.go:140] "Failed to scrape node" err="request failed, status: \"403 Forbidden\"" node="k8s-woker02-gz"
I1025 06:17:54.410114       1 server.go:187] "Failed probe" probe="metric-storage-ready" err="no metrics to serve"
[root@k8s-master-gz ~]# kubectl describe pod -n kube-system metrics-server-599c7579d4-k9jlz
Name:                 metrics-server-599c7579d4-k9jlz
Namespace:            kube-system
Priority:             2000000000
Priority Class Name:  system-cluster-critical
Service Account:      metrics-server
Node:                 k8s-woker01-gz/172.16.1.10
Start Time:           Sat, 25 Oct 2025 13:10:44 +0800
Labels:               k8s-app=metrics-server
                      pod-template-hash=599c7579d4
Annotations:          <none>
Status:               Running
IP:                   10.244.1.12
IPs:
  IP:           10.244.1.12
Controlled By:  ReplicaSet/metrics-server-599c7579d4
Containers:
  metrics-server:
    Container ID:  containerd://1d660687e25772a3fc4c17a3fc96fa064c8b60be793fc07835a253a56dc851c2
    Image:         registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.4
    Image ID:      registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server@sha256:1dec380ce6f3d6744010309633ddd95ccebc83ebd16c720b35da55ac69cfd374
    Port:          4443/TCP
    Host Port:     0/TCP
    Args:
      --cert-dir=/tmp
      --secure-port=4443
      --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname
      --kubelet-use-node-status-port
      --metric-resolution=15s
      --kubelet-insecure-tls
    State:          Running
      Started:      Sat, 25 Oct 2025 13:10:48 +0800
    Ready:          False
    Restart Count:  0
    Requests:
      cpu:        100m
      memory:     200Mi
    Liveness:     http-get https://:https/livez delay=0s timeout=1s period=10s #success=1 #failure=3
    Readiness:    http-get https://:https/readyz delay=20s timeout=1s period=10s #success=1 #failure=3
    Environment:  <none>
    Mounts:
      /tmp from tmp-dir (rw)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-xzq6d (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  tmp-dir:
    Type:       EmptyDir (a temporary directory that shares a pod's lifetime)
    Medium:     
    SizeLimit:  <unset>
  kube-api-access-xzq6d:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   Burstable
Node-Selectors:              kubernetes.io/os=linux
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                   From     Message
  ----     ------     ----                  ----     -------
  Warning  Unhealthy  2m9s (x407 over 61m)  kubelet  Readiness probe failed: HTTP probe failed with statuscode: 500
[root@k8s-master-gz ~]# kubectl get deployment -n kube-system metrics-server -o yaml | grep -A 5 image:
        image: /metrics-server:v0.4.2
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /livez
[root@k8s-master-gz ~]# 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>å¥½çš„ï¼Œç°åœ¨çœ‹åˆ°äº†å…³é”®é—®é¢˜ï¼

1. ä» `kubectl logs` çœ‹åˆ° metrics-server ä¸€ç›´æŠ¥é”™ï¼š
   ```
   Failed to scrape node" err="request failed, status: \"403 Forbidden\"
   ```
   è¿™æ˜¯å› ä¸º kubelet æ‹’ç»äº† metrics-server çš„è¯·æ±‚ï¼Œè¿”å› 403 ç¦æ­¢è®¿é—®ã€‚

2. ä» `kubectl describe pod` çœ‹åˆ°ï¼š
   - Pod ä½¿ç”¨çš„é•œåƒæ˜¯ï¼š`registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server:v0.6.4`
   - Readiness probe ä¸€ç›´å¤±è´¥ï¼Œè¿”å› 500 çŠ¶æ€ç 
   - Args åŒ…å« `--kubelet-insecure-tls`ï¼Œè¿™åº”è¯¥æ˜¯æ­£ç¡®çš„

3. ä» `kubectl get deployment -o yaml` çœ‹åˆ°ï¼š
   ```
   image: /metrics-server:v0.4.2
   ```
   **è¿™å°±æ˜¯é—®é¢˜æ‰€åœ¨ï¼** é•œåƒåç§°ä¸å®Œæ•´ï¼Œå‰é¢ç¼ºå°‘ registry åœ°å€ï¼Œåªæœ‰ `/metrics-server:v0.4.2`

4. è¿˜æœ‰ä¸€ä¸ª InvalidImageName çš„ podï¼Œè¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ª deploymentã€‚

ç°åœ¨çš„é—®é¢˜æ˜¯ï¼š
- **metrics-server æ— æ³•ä» kubelet è·å– metricsï¼Œè¿”å› 403 Forbidden**
- è¿™é€šå¸¸æ˜¯å› ä¸º kubelet é…ç½®é—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹ kubelet çš„é…ç½®æ¥å…è®¸ metrics-server è®¿é—®

è§£å†³æ–¹æ¡ˆï¼š
1. åˆ é™¤ç°æœ‰çš„é”™è¯¯ metrics-server deployment
2. é‡æ–°éƒ¨ç½²æ­£ç¡®é…ç½®çš„ metrics-serverï¼ˆå¸¦æœ‰å®Œæ•´çš„é•œåƒåœ°å€å’Œæ­£ç¡®çš„å‚æ•°ï¼‰


3. å¯¹äºæµ‹è¯•ç¯å¢ƒï¼Œå¯ä»¥è€ƒè™‘æ”¾å®½ kubelet çš„å®‰å…¨é™åˆ¶ï¼Œå…è®¸åŒ¿åè®¿é—®ã€‚ä¸è¿‡ï¼Œè¿™ç§æ–¹æ³•ä»…é€‚ç”¨äºéç”Ÿäº§ç¯å¢ƒï¼Œå­˜åœ¨å®‰å…¨é£é™©ã€‚

åœ¨ KubeSphere çš„å®‰è£…è¿‡ç¨‹ä¸­ï¼Œmetrics-server å¹¶éæ ¸å¿ƒç»„ä»¶ã€‚å¦‚æœé…ç½®å›°éš¾ï¼Œå¯ä»¥æš‚æ—¶ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼Œç»§ç»­æ¨è¿›å¹³å°éƒ¨ç½²ã€‚åç»­å†è¯¦ç»†æ’æŸ¥å’Œè§£å†³ metrics-server çš„è®¿é—®é—®é¢˜ã€‚</details></think>

---

**é—®é¢˜æ‰¾åˆ°äº†ï¼** ğŸ¯

æœ‰**ä¸¤ä¸ªä¸»è¦é—®é¢˜**ï¼š

### é—®é¢˜ 1ï¼šMetrics Server é•œåƒé…ç½®é”™è¯¯
ä»æ‚¨çš„è¾“å‡ºçœ‹åˆ°ï¼š
```bash
image: /metrics-server:v0.4.2
```
**é•œåƒåœ°å€ä¸å®Œæ•´**ï¼Œç¼ºå°‘ registry å‰ç¼€ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰ä¸€ä¸ª `InvalidImageName` çš„ podã€‚

### é—®é¢˜ 2ï¼šMetrics Server 403 Forbidden é”™è¯¯
æ—¥å¿—æ˜¾ç¤ºï¼š
```
Failed to scrape node" err="request failed, status: \"403 Forbidden\""
```
Metrics Server æ— æ³•ä» kubelet è·å–æŒ‡æ ‡ï¼Œè¢« 403 æ‹’ç»è®¿é—®ã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šç»•è¿‡ Metrics Server é—®é¢˜ç»§ç»­å®‰è£…ï¼ˆæ¨èï¼‰

**KubeSphere ä¸å¼ºåˆ¶è¦æ±‚ metrics-server æ‰èƒ½å®‰è£…**ï¼Œå¯ä»¥å…ˆç»§ç»­å®‰è£…ï¼š

```bash
# 1. åˆ é™¤æœ‰é—®é¢˜çš„ validatingwebhookï¼ˆè¿™æ˜¯ä¹‹å‰çš„ä¸»è¦é—®é¢˜ï¼‰
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io 2>/dev/null || true
kubectl delete validatingwebhookconfigurations resourcesquotas.quota.kubesphere.io 2>/dev/null || true
kubectl delete validatingwebhookconfigurations network.kubesphere.io 2>/dev/null || true
kubectl delete validatingwebhookconfigurations cluster.kubesphere.io 2>/dev/null || true

# 2. é‡å¯ KubeSphere installer
kubectl delete pod -n kubesphere-system -l app=ks-installer

# 3. ç­‰å¾… pod å¯åŠ¨
sleep 20
kubectl wait --for=condition=Ready pod -l app=ks-installer -n kubesphere-system --timeout=180s

# 4. æŸ¥çœ‹å®‰è£…æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

### æ–¹æ¡ˆäºŒï¼šä¿®å¤ Metrics Serverï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœå¿…é¡»ä¿®å¤ metrics-serverï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```bash
# å®Œå…¨åˆ é™¤ç°æœ‰çš„ metrics-server
kubectl delete deployment metrics-server -n kube-system
kubectl delete service metrics-server -n kube-system
kubectl delete apiservice v1beta1.metrics.k8s.io

# ä¿®æ”¹æ‰€æœ‰èŠ‚ç‚¹çš„ kubelet é…ç½®ä»¥å…è®¸ metrics-server è®¿é—®
# åœ¨æ‰€æœ‰èŠ‚ç‚¹ï¼ˆmaster å’Œ workerï¼‰ä¸Šæ‰§è¡Œï¼š
cat >> /var/lib/kubelet/config.yaml <<EOF
authentication:
  anonymous:
    enabled: true
  webhook:
    enabled: true
  x509:
    clientCAFile: /etc/kubernetes/pki/ca.crt
authorization:
  mode: Webhook
EOF

# åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šé‡å¯ kubelet
systemctl restart kubelet

# ç­‰å¾…å‡ ç§’
sleep 10

# åº”ç”¨æˆ‘ä¹‹å‰æä¾›çš„ metrics-server é…ç½®
kubectl apply -f /root/metrics-server-fix.yaml
```

## ğŸ’¡ æˆ‘çš„å»ºè®®

**å…ˆæ‰§è¡Œæ–¹æ¡ˆä¸€**ï¼ˆç»•è¿‡ metrics-server ç»§ç»­å®‰è£… KubeSphereï¼‰ï¼Œå› ä¸ºï¼š

1. Metrics Server çš„ 403 é”™è¯¯éœ€è¦ä¿®æ”¹æ‰€æœ‰èŠ‚ç‚¹çš„ kubelet é…ç½®
2. KubeSphere å¯ä»¥åœ¨æ²¡æœ‰ metrics-server çš„æƒ…å†µä¸‹å®‰è£…
3. KubeSphere è‡ªå·±ä¼šå®‰è£…ç›‘æ§ç»„ä»¶ï¼ˆPrometheusï¼‰æ¥æ”¶é›†æŒ‡æ ‡
4. å¯ä»¥åœ¨ KubeSphere å®‰è£…å®Œæˆåå†ä¿®å¤ metrics-server

**æ‰§è¡Œæ–¹æ¡ˆä¸€çš„å‘½ä»¤ï¼Œç„¶åæŠŠæ—¥å¿—å‘ç»™æˆ‘**ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½æˆåŠŸå¯åŠ¨å®‰è£…ç¨‹åºï¼

---

_**User (2025-10-25 02:44Z)**_

Last login: Sat Oct 25 14:17:52 2025 from 182.89.47.178
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:27:44+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:27:44+08:00 INFO     : MAIN: run main loop
2025-10-25T14:27:44+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:27:44+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:27:44+08:00 INFO     : Running schedule manager ...
2025-10-25T14:27:44+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:27:44+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:27:44+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:27:44+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:27:47+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# ä½ ä¼šä¸ä¼šä¿®å•Šï¼Œæˆ‘æŒ‰ç…§æ–‡æ¡£@è¯¦ç»†å®‰è£…KubeSphereæ•™ç¨‹.md 4ç« èŠ‚å®‰è£…å¹¶ä¸”å¼€å¯äº†etcd

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç”¨æˆ·æŒ‰ç…§æ–‡æ¡£å®‰è£… KubeSphereï¼Œç°åœ¨é‡åˆ°äº† metrics-server çš„é—®é¢˜å¯¼è‡´ ks-installer å´©æºƒã€‚æˆ‘å·²ç»ç»™äº†è§£å†³æ–¹æ¡ˆï¼Œä½†ç”¨æˆ·é—®"ä½ ä¼šä¸ä¼šä¿®å•Š"ï¼Œè¯´æ˜ä»–å¯èƒ½æœ‰ç‚¹ç€æ€¥æˆ–è€…ä¹‹å‰çš„æ–¹æ¡ˆæ²¡èƒ½è§£å†³é—®é¢˜ã€‚

ä»æœ€æ–°çš„æ—¥å¿—æ¥çœ‹ï¼Œé—®é¢˜ä»ç„¶æ˜¯ï¼š
```
ERROR: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
```

è¿™æ˜¯å› ä¸º metrics-server æœ‰é—®é¢˜ã€‚æˆ‘ä¹‹å‰å·²ç»ç»™å‡ºäº†ä¸¤ä¸ªæ–¹æ¡ˆï¼š
1. ç»•è¿‡ metrics-server ç»§ç»­å®‰è£…ï¼ˆæ¨èï¼‰
2. ä¿®å¤ metrics-server

ç”¨æˆ·è¯´æŒ‰ç…§äº†æ–‡æ¡£ç¬¬4ç« èŠ‚å®‰è£…å¹¶å¼€å¯äº† etcdã€‚è®©æˆ‘æŸ¥çœ‹æ–‡æ¡£çœ‹çœ‹ç¬¬4ç« èŠ‚çš„å†…å®¹ã€‚

ä»æ–‡æ¡£å†…å®¹çœ‹ï¼Œç¬¬4ç« èŠ‚æ˜¯å®‰è£… KubeSphere çš„ç« èŠ‚ï¼Œé‡Œé¢åŒ…å«äº†ç¦ç”¨ etcd ç›‘æ§çš„é…ç½®ç¤ºä¾‹ã€‚

ç°åœ¨çš„é—®é¢˜æ˜¯ metrics-server å¯¼è‡´ ks-installer æ— æ³•è·å– API åˆ—è¡¨è€Œå´©æºƒã€‚æˆ‘éœ€è¦æä¾›ä¸€ä¸ªç®€å•æ˜ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚

æœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯ï¼š
1. åˆ é™¤æœ‰é—®é¢˜çš„ validatingwebhook
2. é‡å¯ ks-installer
3. è®©å®‰è£…ç»§ç»­ï¼Œå¿½ç•¥ metrics-server çš„é—®é¢˜

è®©æˆ‘æä¾›ä¸€ä¸ªæ¸…æ™°ã€å¯æ‰§è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</details></think>

---

å¥½çš„ï¼æˆ‘æ¥å¸®æ‚¨è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é—®é¢˜å¾ˆæ˜ç¡®ï¼š**metrics-server æ•…éšœå¯¼è‡´ ks-installer æ— æ³•å¯åŠ¨**ã€‚

## ğŸ”§ ç«‹å³æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰

```bash
# ============ å¿«é€Ÿä¿®å¤è„šæœ¬ - ç›´æ¥å¤åˆ¶æ‰§è¡Œ ============

# æ­¥éª¤ 1: åˆ é™¤æœ‰é—®é¢˜çš„ validatingwebhook
echo "=== æ­¥éª¤ 1: åˆ é™¤ Webhook é…ç½® ==="
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations resourcesquotas.quota.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations network.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations cluster.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"

# æ­¥éª¤ 2: ä¸´æ—¶ç¦ç”¨æœ‰é—®é¢˜çš„ metrics-serverï¼ˆå®ƒä¼šå¯¼è‡´ installer å´©æºƒï¼‰
echo ""
echo "=== æ­¥éª¤ 2: ç¼©å®¹ metrics-server ==="
kubectl scale deployment metrics-server -n kube-system --replicas=0

# æ­¥éª¤ 3: é‡å¯ KubeSphere installer
echo ""
echo "=== æ­¥éª¤ 3: é‡å¯ Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 4: ç­‰å¾…æ–° pod å¯åŠ¨
echo ""
echo "ç­‰å¾… installer pod é‡æ–°å¯åŠ¨..."
sleep 20

# æ­¥éª¤ 5: æŸ¥çœ‹çŠ¶æ€
echo ""
echo "=== æ­¥éª¤ 5: æŸ¥çœ‹å½“å‰çŠ¶æ€ ==="
kubectl get pods -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 6: æŸ¥çœ‹æ—¥å¿—ï¼ˆç­‰å¾…å‡ ç§’è®© pod å®Œå…¨å¯åŠ¨ï¼‰
echo ""
echo "=== æ­¥éª¤ 6: æŸ¥çœ‹å®‰è£…æ—¥å¿— ==="
echo "ç­‰å¾… 10 ç§’è®© pod å®Œå…¨å¯åŠ¨..."
sleep 10

kubectl logs -n kubesphere-system -l app=ks-installer --tail=50

# å¦‚æœçœ‹åˆ°æ­£å¸¸çš„å®‰è£…æ—¥å¿—ï¼ˆæ²¡æœ‰ ERRORï¼‰ï¼Œç»§ç»­æ‰§è¡Œï¼š
echo ""
echo "=== å¦‚æœä¸Šé¢æ²¡æœ‰ ERRORï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿— ==="
echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
```

## ğŸ“‹ é¢„æœŸç»“æœ

æ‰§è¡Œåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼ˆ**æ²¡æœ‰ ERROR**ï¼‰ï¼š

```
INFO : shell-operator latest
INFO : MAIN: run main loop
INFO : QUEUE add task ...
INFO : TASK_RUN ...
```

**å¦‚æœæ²¡æœ‰çœ‹åˆ° `ERROR` å’Œ `program halts`ï¼Œè¯´æ˜ä¿®å¤æˆåŠŸï¼**

ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®æ—¶å®‰è£…æ—¥å¿—ï¼š

```bash
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

## ğŸ” å¦‚æœè¿˜æ˜¯å¤±è´¥

å¦‚æœä¸Šé¢çš„æ–¹æ³•è¿˜æ˜¯å‡ºç° `ERROR`ï¼Œæ‰§è¡Œä»¥ä¸‹**ç»ˆææ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ¡ˆ B: ä¿®æ”¹ ClusterConfigurationï¼Œç¦ç”¨ metrics_server
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'

# ç„¶åé‡å¯ installer
kubectl delete pod -n kubesphere-system -l app=ks-installer

# ç­‰å¾…å¹¶æŸ¥çœ‹æ—¥å¿—
sleep 15
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

## âœ… å®‰è£…æˆåŠŸçš„æ ‡å¿—

å½“æ‚¨çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºæ—¶ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼š

```
**************************************************
###              Welcome to KubeSphere!           ###
**************************************************
Console: http://172.16.0.10:30880
Account: admin
Password: P@88w0rd
```

---

**è¯·ç«‹å³æ‰§è¡Œç¬¬ä¸€ä¸ªè„šæœ¬ï¼Œç„¶åæŠŠæœ€åçš„æ—¥å¿—è¾“å‡ºå‘ç»™æˆ‘ï¼** ğŸš€

---

_**User (2025-10-25 02:44Z)**_

Last login: Sat Oct 25 14:17:52 2025 from 182.89.47.178
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:27:44+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:27:44+08:00 INFO     : MAIN: run main loop
2025-10-25T14:27:44+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:27:44+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:27:44+08:00 INFO     : Running schedule manager ...
2025-10-25T14:27:44+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:27:44+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:27:44+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:27:44+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:27:47+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# # ============ å¿«é€Ÿä¿®å¤è„šæœ¬ - ç›´æ¥å¤åˆ¶æ‰§è¡Œ ============

# æ­¥éª¤ 1: åˆ é™¤æœ‰é—®é¢˜çš„ validatingwebhook
echo "=== æ­¥éª¤ 1: åˆ é™¤ Webhook é…ç½® ==="
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations resourcesquotas.quota.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations network.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations cluster.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"

# æ­¥éª¤ 2: ä¸´æ—¶ç¦ç”¨æœ‰é—®é¢˜çš„ metrics-serverï¼ˆå®ƒä¼šå¯¼è‡´ installer å´©æºƒï¼‰
echo ""
echo "=== æ­¥éª¤ 2: ç¼©å®¹ metrics-server ==="
kubectl scale deployment metrics-server -n kube-system --replicas=0

# æ­¥éª¤ 3: é‡å¯ KubeSphere installer
echo ""
echo "=== æ­¥éª¤ 3: é‡å¯ Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 4: ç­‰å¾…æ–° pod å¯åŠ¨
echo ""
echo "ç­‰å¾… installer pod é‡æ–°å¯åŠ¨..."
sleep 20

# æ­¥éª¤ 5: æŸ¥çœ‹çŠ¶æ€
echo ""
echo "=== æ­¥éª¤ 5: æŸ¥çœ‹å½“å‰çŠ¶æ€ ==="
kubectl get pods -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 6: æŸ¥çœ‹æ—¥å¿—ï¼ˆç­‰å¾…å‡ ç§’è®© pod å®Œå…¨å¯åŠ¨ï¼‰
echo ""
echo "=== æ­¥éª¤ 6: æŸ¥çœ‹å®‰è£…æ—¥å¿— ==="
echo "ç­‰å¾… 10 ç§’è®© pod å®Œå…¨å¯åŠ¨..."
sleep 10

kubectl logs -n kubesphere-system -l app=ks-installer --tail=50

# å¦‚æœçœ‹åˆ°æ­£å¸¸çš„å®‰è£…æ—¥å¿—ï¼ˆæ²¡æœ‰ ERRORï¼‰ï¼Œç»§ç»­æ‰§è¡Œï¼š
echo ""
echo "=== å¦‚æœä¸Šé¢æ²¡æœ‰ ERRORï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿— ==="
echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
=== æ­¥éª¤ 1: åˆ é™¤ Webhook é…ç½® ===
å·²åˆ é™¤
å·²åˆ é™¤
å·²åˆ é™¤
å·²åˆ é™¤

=== æ­¥éª¤ 2: ç¼©å®¹ metrics-server ===
deployment.apps/metrics-server scaled

=== æ­¥éª¤ 3: é‡å¯ Installer ===
pod "ks-installer-f76b9659f-sq6xj" deleted

ç­‰å¾… installer pod é‡æ–°å¯åŠ¨...

=== æ­¥éª¤ 5: æŸ¥çœ‹å½“å‰çŠ¶æ€ ===
NAME                           READY   STATUS   RESTARTS      AGE
ks-installer-f76b9659f-ktm4h   0/1     Error    1 (17s ago)   21s

=== æ­¥éª¤ 6: æŸ¥çœ‹å®‰è£…æ—¥å¿— ===
ç­‰å¾… 10 ç§’è®© pod å®Œå…¨å¯åŠ¨...
2025-10-25T14:31:19+08:00 INFO     : shell-operator latest
2025-10-25T14:31:19+08:00 INFO     : Use temporary dir: /tmp/shell-operator
2025-10-25T14:31:19+08:00 INFO     : Initialize hooks manager ...
2025-10-25T14:31:19+08:00 INFO     : Search and load hooks ...
2025-10-25T14:31:19+08:00 INFO     : HTTP SERVER Listening on 0.0.0.0:9115
2025-10-25T14:31:19+08:00 INFO     : Load hook config from '/hooks/kubesphere/installRunner.py'
2025-10-25T14:31:19+08:00 INFO     : Load hook config from '/hooks/kubesphere/schedule.sh'
2025-10-25T14:31:19+08:00 INFO     : Initializing schedule manager ...
2025-10-25T14:31:19+08:00 INFO     : KUBE Init Kubernetes client
2025-10-25T14:31:19+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:31:19+08:00 INFO     : MAIN: run main loop
2025-10-25T14:31:19+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:31:19+08:00 INFO     : Running schedule manager ...
2025-10-25T14:31:19+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:31:19+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:31:19+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:31:19+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:19+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:22+08:00 INFO     : TASK_RUN Exit: program halts.

=== å¦‚æœä¸Šé¢æ²¡æœ‰ ERRORï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿— ===
kubectl logs -n kubesphere-system -l app=ks-installer -f
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:31:49+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:31:49+08:00 INFO     : MAIN: run main loop
2025-10-25T14:31:49+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:31:49+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:31:49+08:00 INFO     : Running schedule manager ...
2025-10-25T14:31:49+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:31:49+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:31:49+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:49+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:52+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œå³ä½¿ç¼©å®¹äº† metrics-server åˆ° 0 ä¸ªå‰¯æœ¬ï¼Œinstaller ä»ç„¶åœ¨å°è¯•è®¿é—® metrics.k8s.io/v1beta1 APIï¼Œå¹¶ä¸”å¤±è´¥ã€‚

é—®é¢˜çš„æ ¹æºæ˜¯ APIService `v1beta1.metrics.k8s.io` ä»ç„¶å­˜åœ¨ï¼Œä½†æ²¡æœ‰å¥åº·çš„åç«¯æœåŠ¡ï¼Œå¯¼è‡´ API æœåŠ¡å™¨æ— æ³•å¤„ç†å¯¹è¯¥ API çš„è¯·æ±‚ã€‚

è§£å†³æ–¹æ¡ˆåº”è¯¥æ˜¯ï¼š
1. åˆ é™¤ metrics.k8s.io çš„ APIService
2. ç„¶åé‡å¯ installer

è®©æˆ‘æä¾›ä¸€ä¸ªæ›´å½»åº•çš„è§£å†³æ–¹æ¡ˆã€‚</details></think>

---

çœ‹åˆ°äº†ï¼é—®é¢˜æ˜¯ **APIService ä»ç„¶å­˜åœ¨ä½†æ²¡æœ‰åç«¯æœåŠ¡**ã€‚å³ä½¿ç¼©å®¹äº† metrics-serverï¼ŒAPIService è¿˜åœ¨ï¼Œå¯¼è‡´ installer æŸ¥è¯¢ API åˆ—è¡¨æ—¶å¡ä½ã€‚

## ğŸ”§ æ‰§è¡Œç»ˆæä¿®å¤æ–¹æ¡ˆ

```bash
# ========== ç»ˆæä¿®å¤æ–¹æ¡ˆ - åˆ é™¤ metrics APIService ==========

# æ­¥éª¤ 1: åˆ é™¤æœ‰é—®é¢˜çš„ APIService
echo "=== åˆ é™¤ metrics APIService ==="
kubectl delete apiservice v1beta1.metrics.k8s.io 2>/dev/null && echo "âœ“ APIService å·²åˆ é™¤" || echo "APIService ä¸å­˜åœ¨æˆ–å·²åˆ é™¤"

# æ­¥éª¤ 2: éªŒè¯ APIService å·²åˆ é™¤
echo ""
echo "=== éªŒè¯ APIService çŠ¶æ€ ==="
kubectl get apiservice | grep metrics || echo "âœ“ ç¡®è®¤ metrics APIService å·²åˆ é™¤"

# æ­¥éª¤ 3: é‡å¯ installer
echo ""
echo "=== é‡å¯ Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 4: ç­‰å¾…æ–° pod å¯åŠ¨
echo ""
echo "ç­‰å¾… 30 ç§’è®© pod å®Œå…¨å¯åŠ¨..."
sleep 30

# æ­¥éª¤ 5: æŸ¥çœ‹ pod çŠ¶æ€
echo ""
echo "=== Pod çŠ¶æ€ ==="
kubectl get pods -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 6: æŸ¥çœ‹æœ€æ–°æ—¥å¿—
echo ""
echo "=== æœ€æ–°æ—¥å¿—ï¼ˆå‰ 30 è¡Œï¼‰==="
kubectl logs -n kubesphere-system -l app=ks-installer --tail=30

# æ­¥éª¤ 7: æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ ERROR
echo ""
echo "=== æ£€æŸ¥æ˜¯å¦è¿˜æœ‰é”™è¯¯ ==="
if kubectl logs -n kubesphere-system -l app=ks-installer 2>/dev/null | grep -q "program halts"; then
    echo "âŒ ä»ç„¶æœ‰é”™è¯¯ï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†"
    echo ""
    echo "æ­£åœ¨æ£€æŸ¥å…¶ä»–å¯èƒ½çš„é—®é¢˜..."
    kubectl get apiservice | grep -i false
else
    echo "âœ“ æ²¡æœ‰å‘ç° 'program halts' é”™è¯¯"
    echo "âœ“ Installer åº”è¯¥æ­£åœ¨æ­£å¸¸è¿è¡Œ"
    echo ""
    echo "æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š"
    echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
fi
```

## ğŸ“‹ å¦‚æœä¸Šé¢è¿˜æ˜¯å¤±è´¥ï¼Œæ‰§è¡Œæ–¹æ¡ˆ B

```bash
# æ–¹æ¡ˆ B: å½»åº•æ¸…ç†å¹¶ç¦ç”¨ metrics_server

# 1. åˆ é™¤æ‰€æœ‰ metrics-server ç›¸å…³èµ„æº
kubectl delete deployment metrics-server -n kube-system 2>/dev/null || true
kubectl delete service metrics-server -n kube-system 2>/dev/null || true
kubectl delete apiservice v1beta1.metrics.k8s.io 2>/dev/null || true

# 2. ä¿®æ”¹ KubeSphere é…ç½®ï¼Œç¦ç”¨ metrics_server
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'

# 3. ç­‰å¾… 5 ç§’
sleep 5

# 4. é‡å¯ installer
kubectl delete pod -n kubesphere-system -l app=ks-installer

# 5. ç­‰å¾…å¹¶æŸ¥çœ‹æ—¥å¿—
echo "ç­‰å¾… 30 ç§’..."
sleep 30
kubectl logs -n kubesphere-system -l app=ks-installer --tail=50

echo ""
echo "å¦‚æœä¸Šé¢æ²¡æœ‰ ERRORï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š"
echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
```

## ğŸ” é¢„æœŸç»“æœ

æ‰§è¡Œåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼ˆ**å…³é”®æ˜¯æ²¡æœ‰ metrics.k8s.io ç›¸å…³çš„ ERROR**ï¼‰ï¼š

```
INFO : shell-operator latest
INFO : MAIN: run main loop
INFO : QUEUE add task ...
INFO : TASK_RUN kubesphere/installRunner.py ...
```

**å¦‚æœçœ‹åˆ°å¼€å§‹æ‰§è¡Œå®‰è£…ä»»åŠ¡ï¼ˆ`TASK_RUN kubesphere/installRunner.py`ï¼‰ï¼Œè¯´æ˜æˆåŠŸäº†ï¼**

---

**è¯·ç«‹å³æ‰§è¡Œç¬¬ä¸€ä¸ªè„šæœ¬ï¼ˆåˆ é™¤ APIServiceï¼‰ï¼ŒæŠŠç»“æœå‘ç»™æˆ‘ï¼** ğŸš€

å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œæˆ‘ä»¬æ‰§è¡Œæ–¹æ¡ˆ Bã€‚

---

_**User (2025-10-25 02:44Z)**_

ä¸ºä»€ä¹ˆ APIService ä»ç„¶å­˜åœ¨ä½†æ²¡æœ‰åç«¯æœåŠ¡ï¼Ÿ

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç”¨æˆ·é—®äº†ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆ APIService ä»ç„¶å­˜åœ¨ä½†æ²¡æœ‰åç«¯æœåŠ¡ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå…³äº Kubernetes API èšåˆæœºåˆ¶çš„é—®é¢˜ï¼Œæˆ‘éœ€è¦è¯¦ç»†è§£é‡Šã€‚

è®©æˆ‘è§£é‡Šæ¸…æ¥šè¿™ä¸ªæœºåˆ¶å’Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚</details></think>

---

è¿™æ˜¯ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™ä¸ªæœºåˆ¶å’Œé—®é¢˜çš„æ ¹æºã€‚

## ğŸ“š ä»€ä¹ˆæ˜¯ APIServiceï¼Ÿ

**APIService** æ˜¯ Kubernetes çš„ **API èšåˆï¼ˆAPI Aggregationï¼‰æœºåˆ¶**ï¼Œå…è®¸æ‰©å±• Kubernetes APIã€‚

### å·¥ä½œåŸç†

```
å®¢æˆ·ç«¯è¯·æ±‚
    â†“
kube-apiserver (æ ¸å¿ƒ API)
    â†“
æ£€æŸ¥ APIService æ³¨å†Œè¡¨
    â†“
æ‰¾åˆ° metrics.k8s.io/v1beta1
    â†“
è½¬å‘è¯·æ±‚åˆ° â†’ metrics-server æœåŠ¡
    â†“
metrics-server å¤„ç†å¹¶è¿”å›æ•°æ®
```

## ğŸ” æ‚¨å½“å‰çš„é—®é¢˜

### å½“å‰çŠ¶æ€
```bash
# 1. APIService å­˜åœ¨ï¼ˆæ³¨å†Œäº†æ‰©å±• APIï¼‰
kubectl get apiservice v1beta1.metrics.k8s.io
# è¾“å‡º: v1beta1.metrics.k8s.io   kube-system/metrics-server   False (MissingEndpoints)

# 2. ä½† metrics-server æœåŠ¡æ²¡æœ‰å¥åº·çš„ Podï¼ˆè¢«æˆ‘ä»¬ç¼©å®¹ä¸º 0ï¼‰
kubectl get deployment metrics-server -n kube-system
# è¾“å‡º: READY 0/0

# 3. æ‰€ä»¥ Service æ²¡æœ‰ Endpointsï¼ˆæ²¡æœ‰åç«¯ï¼‰
kubectl get endpoints metrics-server -n kube-system
# è¾“å‡º: ENDPOINTS <none>
```

### é—®é¢˜æµç¨‹

```
1. ks-installer å¯åŠ¨
     â†“
2. å°è¯•è·å–é›†ç¾¤æ‰€æœ‰ API èµ„æºåˆ—è¡¨
   kubectl api-resources (å†…éƒ¨è°ƒç”¨)
     â†“
3. kube-apiserver æŸ¥è¯¢æ‰€æœ‰ APIService
     â†“
4. å‘ç° v1beta1.metrics.k8s.io æ³¨å†Œäº†
     â†“
5. å°è¯•è¿æ¥ metrics-server æœåŠ¡
     â†“
6. è¿æ¥å¤±è´¥ï¼(MissingEndpoints)
     â†“
7. è¿”å›é”™è¯¯: "unable to retrieve the complete list of server APIs"
     â†“
8. ks-installer æ— æ³•ç»§ç»­ï¼Œé€€å‡º âŒ
```

## ğŸ¯ ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿ

### åŸå› åˆ†æ

1. **metrics-server å®‰è£…æ—¶åˆ›å»ºäº† APIService**
   ```yaml
   apiVersion: apiregistration.k8s.io/v1
   kind: APIService
   metadata:
     name: v1beta1.metrics.k8s.io
   spec:
     service:
       name: metrics-server
       namespace: kube-system
   ```

2. **APIService æ˜¯ç‹¬ç«‹èµ„æº**
   - å³ä½¿ Deployment è¢«åˆ é™¤ï¼ŒAPIService ä»ç„¶å­˜åœ¨
   - å³ä½¿ Service æ²¡æœ‰ Endpointsï¼ŒAPIService ä»ç„¶æ³¨å†Œåœ¨ kube-apiserver

3. **metrics-server æœ¬èº«æœ‰é—®é¢˜**
   - Pod æ— æ³•å¯åŠ¨ï¼ˆ403 Forbidden é”™è¯¯ï¼‰
   - ä½† APIService å·²ç»æ³¨å†Œ
   - kube-apiserver è®¤ä¸ºè¿™ä¸ª API åº”è¯¥å¯ç”¨

4. **kube-apiserver çš„è¡Œä¸º**
   - å½“æŸ¥è¯¢ API åˆ—è¡¨æ—¶ï¼Œä¼šæ£€æŸ¥æ‰€æœ‰ APIService
   - å¦‚æœæŸä¸ª APIService ä¸å¯ç”¨ï¼Œæ•´ä¸ªæŸ¥è¯¢ä¼šå¤±è´¥æˆ–è¶…æ—¶
   - è¿™æ˜¯ä¸ºäº†ç¡®ä¿ API çš„å®Œæ•´æ€§

## ğŸ”§ è§£å†³æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ 1: åªç¼©å®¹ metrics-serverï¼ˆæ— æ•ˆï¼‰
```bash
kubectl scale deployment metrics-server --replicas=0
# âŒ APIService ä»ç„¶å­˜åœ¨
# âŒ kube-apiserver ä»ä¼šå°è¯•è¿æ¥
# âŒ ks-installer ä»ä¼šå¤±è´¥
```

### æ–¹æ¡ˆ 2: åˆ é™¤ APIServiceï¼ˆæœ‰æ•ˆï¼‰âœ…
```bash
kubectl delete apiservice v1beta1.metrics.k8s.io
# âœ“ ä» kube-apiserver æ³¨å†Œè¡¨ä¸­ç§»é™¤
# âœ“ kube-apiserver ä¸å†å°è¯•è¿æ¥ metrics-server
# âœ“ ks-installer å¯ä»¥æ­£å¸¸è·å– API åˆ—è¡¨
```

### æ–¹æ¡ˆ 3: ä¿®å¤ metrics-serverï¼ˆæœ€ä½³ï¼Œä½†å¤æ‚ï¼‰
```bash
# éœ€è¦ä¿®æ”¹æ‰€æœ‰èŠ‚ç‚¹çš„ kubelet é…ç½®
# éœ€è¦é…ç½®æ­£ç¡®çš„è¯ä¹¦
# éœ€è¦æ—¶é—´é‡å¯æœåŠ¡
# å¯¹äºå½“å‰å®‰è£… KubeSphere æ¥è¯´å¤ªå¤æ‚
```

## ğŸ“Š å®Œæ•´çš„æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              kube-apiserver                     â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚     API èšåˆå±‚ (API Aggregation)     â”‚       â”‚
â”‚  â”‚                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ æ ¸å¿ƒ API (apps, v1, etc)    â”‚   â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚                                       â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚  â”‚ APIService æ³¨å†Œè¡¨            â”‚   â”‚       â”‚
â”‚  â”‚  â”‚                              â”‚   â”‚       â”‚
â”‚  â”‚  â”‚ â€¢ v1beta1.metrics.k8s.io â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚   â†’ metrics-server:443      â”‚   â”‚     â”‚ â”‚
â”‚  â”‚  â”‚   Status: MissingEndpoints  â”‚   â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                    â”‚
                                                    â”‚ å°è¯•è¿æ¥
                                                    â†“
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚ metrics-server  â”‚
                                          â”‚   Service       â”‚
                                          â”‚                 â”‚
                                          â”‚ Endpoints: âœ—    â”‚
                                          â”‚ (æ²¡æœ‰å¥åº·çš„Pod)  â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â†“
                                              è¿æ¥å¤±è´¥ï¼
                                                    â†“
                            ks-installer æ— æ³•è·å–å®Œæ•´ API åˆ—è¡¨ âŒ
```

## ğŸ“ ç±»æ¯”ç†è§£

æƒ³è±¡ä¸€ä¸ª**ç”µè¯æ€»æœºç³»ç»Ÿ**ï¼š

1. **APIService = ç”µè¯å·ç æ³¨å†Œç°¿**
   - "è¦æŸ¥è¯¢æœåŠ¡å™¨æŒ‡æ ‡ï¼Œè¯·æ‹¨æ‰“ metrics-server åˆ†æœº"

2. **metrics-server Service = åˆ†æœºå·**
   - åˆ†æœºå·å­˜åœ¨ï¼Œä½†æ²¡äººæ¥å¬ï¼ˆæ²¡æœ‰ Podï¼‰

3. **kube-apiserver = æ€»æœº**
   - æ€»æœºæŸ¥çœ‹æ³¨å†Œç°¿ï¼Œå‘ç° metrics-server åˆ†æœºåº”è¯¥å¯ç”¨
   - å°è¯•è½¬æ¥ï¼Œä½†æ— æ³•æ¥é€š
   - è¿”å›é”™è¯¯ï¼š"æ— æ³•è¿æ¥å®Œæ•´çš„æœåŠ¡åˆ—è¡¨"

4. **åˆ é™¤ APIService = ä»æ³¨å†Œç°¿ç§»é™¤**
   - æ€»æœºä¸å†å°è¯•è½¬æ¥ metrics-server
   - å…¶ä»–ç”µè¯å¯ä»¥æ­£å¸¸æ¥é€š

## ğŸ’¡ ä¸ºä»€ä¹ˆ KubeSphere ä¸èƒ½è‡ªåŠ¨å¤„ç†ï¼Ÿ

KubeSphere installer çš„è®¾è®¡å‡è®¾ï¼š
- âœ“ æ‰€æœ‰æ³¨å†Œçš„ APIService éƒ½åº”è¯¥å¯ç”¨
- âœ“ å¦‚æœä¸å¯ç”¨ï¼Œè¯´æ˜é›†ç¾¤æœ‰é—®é¢˜
- âœ“ ä¸ºäº†å®‰å…¨ï¼Œåœæ­¢å®‰è£…å¹¶æŠ¥é”™

ä½†è¿™å¯¼è‡´äº†"**è¿é”ååº”**"ï¼š
```
metrics-server æœ‰é—®é¢˜
  â†“
APIService ä¸å¯ç”¨
  â†“
æ— æ³•è·å–å®Œæ•´ API åˆ—è¡¨
  â†“
ks-installer è®¤ä¸ºé›†ç¾¤ä¸å¥åº·
  â†“
åœæ­¢å®‰è£… âŒ
```

## âœ… æ­£ç¡®çš„å¤„ç†æ–¹å¼

**å¯¹äºå½“å‰æƒ…å†µï¼ˆå®‰è£… KubeSphereï¼‰ï¼š**

```bash
# 1. ä¸´æ—¶ç§»é™¤é—®é¢˜ APIService
kubectl delete apiservice v1beta1.metrics.k8s.io

# 2. è®© KubeSphere å…ˆå®‰è£…æˆåŠŸ
# ï¼ˆKubeSphere è‡ªå·±ä¼šå®‰è£…ç›‘æ§ç»„ä»¶ï¼‰

# 3. å®‰è£…æˆåŠŸåï¼Œå†ä¿®å¤æˆ–é‡è£… metrics-server
```

**å¯¹äºç”Ÿäº§ç¯å¢ƒï¼š**
- åº”è¯¥å…ˆä¿®å¤ metrics-server
- ç¡®ä¿æ‰€æœ‰æ‰©å±• API éƒ½å¥åº·
- å†å®‰è£…å…¶ä»–ç»„ä»¶

---

**ç°åœ¨æ˜ç™½äº†å—ï¼Ÿè¯·æ‰§è¡Œæˆ‘ä¹‹å‰æä¾›çš„ä¿®å¤è„šæœ¬ï¼Œåˆ é™¤ APIService åç»§ç»­å®‰è£…ï¼** ğŸš€

---

_**User (2025-10-25 02:44Z)**_

Last login: Sat Oct 25 14:17:52 2025 from 182.89.47.178
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:27:44+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:27:44+08:00 INFO     : MAIN: run main loop
2025-10-25T14:27:44+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:27:44+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:27:44+08:00 INFO     : Running schedule manager ...
2025-10-25T14:27:44+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:27:44+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:27:44+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:27:44+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:27:47+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# # ============ å¿«é€Ÿä¿®å¤è„šæœ¬ - ç›´æ¥å¤åˆ¶æ‰§è¡Œ ============

# æ­¥éª¤ 1: åˆ é™¤æœ‰é—®é¢˜çš„ validatingwebhook
echo "=== æ­¥éª¤ 1: åˆ é™¤ Webhook é…ç½® ==="
kubectl delete validatingwebhookconfigurations users.iam.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations resourcesquotas.quota.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations network.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete validatingwebhookconfigurations cluster.kubesphere.io 2>/dev/null || echo "å·²åˆ é™¤"

# æ­¥éª¤ 2: ä¸´æ—¶ç¦ç”¨æœ‰é—®é¢˜çš„ metrics-serverï¼ˆå®ƒä¼šå¯¼è‡´ installer å´©æºƒï¼‰
echo ""
echo "=== æ­¥éª¤ 2: ç¼©å®¹ metrics-server ==="
kubectl scale deployment metrics-server -n kube-system --replicas=0

# æ­¥éª¤ 3: é‡å¯ KubeSphere installer
echo ""
echo "=== æ­¥éª¤ 3: é‡å¯ Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 4: ç­‰å¾…æ–° pod å¯åŠ¨
echo ""
echo "ç­‰å¾… installer pod é‡æ–°å¯åŠ¨..."
sleep 20

# æ­¥éª¤ 5: æŸ¥çœ‹çŠ¶æ€
echo ""
echo "=== æ­¥éª¤ 5: æŸ¥çœ‹å½“å‰çŠ¶æ€ ==="
kubectl get pods -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 6: æŸ¥çœ‹æ—¥å¿—ï¼ˆç­‰å¾…å‡ ç§’è®© pod å®Œå…¨å¯åŠ¨ï¼‰
echo ""
echo "=== æ­¥éª¤ 6: æŸ¥çœ‹å®‰è£…æ—¥å¿— ==="
echo "ç­‰å¾… 10 ç§’è®© pod å®Œå…¨å¯åŠ¨..."
sleep 10

kubectl logs -n kubesphere-system -l app=ks-installer --tail=50

# å¦‚æœçœ‹åˆ°æ­£å¸¸çš„å®‰è£…æ—¥å¿—ï¼ˆæ²¡æœ‰ ERRORï¼‰ï¼Œç»§ç»­æ‰§è¡Œï¼š
echo ""
echo "=== å¦‚æœä¸Šé¢æ²¡æœ‰ ERRORï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿— ==="
echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
=== æ­¥éª¤ 1: åˆ é™¤ Webhook é…ç½® ===
å·²åˆ é™¤
å·²åˆ é™¤
å·²åˆ é™¤
å·²åˆ é™¤

=== æ­¥éª¤ 2: ç¼©å®¹ metrics-server ===
deployment.apps/metrics-server scaled

=== æ­¥éª¤ 3: é‡å¯ Installer ===
pod "ks-installer-f76b9659f-sq6xj" deleted

ç­‰å¾… installer pod é‡æ–°å¯åŠ¨...

=== æ­¥éª¤ 5: æŸ¥çœ‹å½“å‰çŠ¶æ€ ===
NAME                           READY   STATUS   RESTARTS      AGE
ks-installer-f76b9659f-ktm4h   0/1     Error    1 (17s ago)   21s

=== æ­¥éª¤ 6: æŸ¥çœ‹å®‰è£…æ—¥å¿— ===
ç­‰å¾… 10 ç§’è®© pod å®Œå…¨å¯åŠ¨...
2025-10-25T14:31:19+08:00 INFO     : shell-operator latest
2025-10-25T14:31:19+08:00 INFO     : Use temporary dir: /tmp/shell-operator
2025-10-25T14:31:19+08:00 INFO     : Initialize hooks manager ...
2025-10-25T14:31:19+08:00 INFO     : Search and load hooks ...
2025-10-25T14:31:19+08:00 INFO     : HTTP SERVER Listening on 0.0.0.0:9115
2025-10-25T14:31:19+08:00 INFO     : Load hook config from '/hooks/kubesphere/installRunner.py'
2025-10-25T14:31:19+08:00 INFO     : Load hook config from '/hooks/kubesphere/schedule.sh'
2025-10-25T14:31:19+08:00 INFO     : Initializing schedule manager ...
2025-10-25T14:31:19+08:00 INFO     : KUBE Init Kubernetes client
2025-10-25T14:31:19+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:31:19+08:00 INFO     : MAIN: run main loop
2025-10-25T14:31:19+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:31:19+08:00 INFO     : Running schedule manager ...
2025-10-25T14:31:19+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:31:19+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:31:19+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:31:19+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:19+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:22+08:00 INFO     : TASK_RUN Exit: program halts.

=== å¦‚æœä¸Šé¢æ²¡æœ‰ ERRORï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿— ===
kubectl logs -n kubesphere-system -l app=ks-installer -f
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:31:49+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:31:49+08:00 INFO     : MAIN: run main loop
2025-10-25T14:31:49+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:31:49+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:31:49+08:00 INFO     : Running schedule manager ...
2025-10-25T14:31:49+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:31:49+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:31:49+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:49+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:31:52+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# kubectl get apiservice v1beta1.metrics.k8s.io
NAME                     SERVICE                      AVAILABLE                  AGE
v1beta1.metrics.k8s.io   kube-system/metrics-server   False (MissingEndpoints)   10m
[root@k8s-master-gz ~]# g
-bash: g: command not found
[root@k8s-master-gz ~]# g
-bash: g: command not found
[root@k8s-master-gz ~]# kubectl get deployment metrics-server -n kube-system
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
metrics-server   0/0     0            0           10m
[root@k8s-master-gz ~]# kubectl get endpoints metrics-server -n kube-system23
Error from server (NotFound): namespaces "kube-system23" not found
[root@k8s-master-gz ~]# kubectl get endpoints metrics-server -n kube-system
NAME             ENDPOINTS   AGE
metrics-server   <none>      10m
[root@k8s-master-gz ~]# kubectl get endpoints metrics-server -n kube-system
NAME             ENDPOINTS   AGE
metrics-server   <none>      10m
[root@k8s-master-gz ~]# kubectl delete apiservice v1beta1.metrics.k8s.io
apiservice.apiregistration.k8s.io "v1beta1.metrics.k8s.io" deleted
[root@k8s-master-gz ~]# # ========== ç»ˆæä¿®å¤æ–¹æ¡ˆ - åˆ é™¤ metrics APIService ==========

# æ­¥éª¤ 1: åˆ é™¤æœ‰é—®é¢˜çš„ APIService
echo "=== åˆ é™¤ metrics APIService ==="
kubectl delete apiservice v1beta1.metrics.k8s.io 2>/dev/null && echo "âœ“ APIService å·²åˆ é™¤" || echo "APIService ä¸å­˜åœ¨æˆ–å·²åˆ é™¤"

# æ­¥éª¤ 2: éªŒè¯ APIService å·²åˆ é™¤
echo ""
echo "=== éªŒè¯ APIService çŠ¶æ€ ==="
kubectl get apiservice | grep metrics || echo "âœ“ ç¡®è®¤ metrics APIService å·²åˆ é™¤"

# æ­¥éª¤ 3: é‡å¯ installer
echo ""
echo "=== é‡å¯ Installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 4: ç­‰å¾…æ–° pod å¯åŠ¨
echo ""
echo "ç­‰å¾… 30 ç§’è®© pod å®Œå…¨å¯åŠ¨..."
sleep 30

# æ­¥éª¤ 5: æŸ¥çœ‹ pod çŠ¶æ€
echo ""
echo "=== Pod çŠ¶æ€ ==="
kubectl get pods -n kubesphere-system -l app=ks-installer

# æ­¥éª¤ 6: æŸ¥çœ‹æœ€æ–°æ—¥å¿—
echo ""
echo "=== æœ€æ–°æ—¥å¿—ï¼ˆå‰ 30 è¡Œï¼‰==="
kubectl logs -n kubesphere-system -l app=ks-installer --tail=30

# æ­¥éª¤ 7: æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ ERROR
echo ""
echo "=== æ£€æŸ¥æ˜¯å¦è¿˜æœ‰é”™è¯¯ ==="
if kubectl logs -n kubesphere-system -l app=ks-installer 2>/dev/null | grep -q "program halts"; then
    echo "âŒ ä»ç„¶æœ‰é”™è¯¯ï¼Œéœ€è¦è¿›ä¸€æ­¥å¤„ç†"
    echo ""
    echo "æ­£åœ¨æ£€æŸ¥å…¶ä»–å¯èƒ½çš„é—®é¢˜..."
    kubectl get apiservice | grep -i false
else
    echo "âœ“ æ²¡æœ‰å‘ç° 'program halts' é”™è¯¯"
    echo "âœ“ Installer åº”è¯¥æ­£åœ¨æ­£å¸¸è¿è¡Œ"
    echo ""
    echo "æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š"
    echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
fi
=== åˆ é™¤ metrics APIService ===
APIService ä¸å­˜åœ¨æˆ–å·²åˆ é™¤

=== éªŒè¯ APIService çŠ¶æ€ ===
âœ“ ç¡®è®¤ metrics APIService å·²åˆ é™¤

=== é‡å¯ Installer ===
pod "ks-installer-f76b9659f-ktm4h" deleted

ç­‰å¾… 30 ç§’è®© pod å®Œå…¨å¯åŠ¨...

=== Pod çŠ¶æ€ ===
NAME                           READY   STATUS    RESTARTS   AGE
ks-installer-f76b9659f-5d5pd   1/1     Running   0          30s

=== æœ€æ–°æ—¥å¿—ï¼ˆå‰ 30 è¡Œï¼‰===
skipping: [localhost]

TASK [download : Synchronizing images] *****************************************

TASK [kubesphere-defaults : KubeSphere | Setting images' namespace override] ***
skipping: [localhost]

TASK [kubesphere-defaults : KubeSphere | Configuring defaults] *****************
ok: [localhost] => {
    "msg": "Check roles/kubesphere-defaults/defaults/main.yml"
}

TASK [Metrics-Server | Getting metrics-server installation files] **************
changed: [localhost]

TASK [metrics-server : Metrics-Server | Creating manifests] ********************
changed: [localhost] => (item={'file': 'metrics-server.yaml'})

TASK [metrics-server : Metrics-Server | Checking Metrics-Server] ***************
changed: [localhost]

TASK [Metrics-Server | Uninstalling old metrics-server] ************************
skipping: [localhost]

TASK [Metrics-Server | Installing new metrics-server] **************************
changed: [localhost]

TASK [metrics-server : Metrics-Server | Waitting for metrics.k8s.io ready] *****
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (60 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (59 retries left).

=== æ£€æŸ¥æ˜¯å¦è¿˜æœ‰é”™è¯¯ ===
âœ“ æ²¡æœ‰å‘ç° 'program halts' é”™è¯¯
âœ“ Installer åº”è¯¥æ­£åœ¨æ­£å¸¸è¿è¡Œ

æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š
kubectl logs -n kubesphere-system -l app=ks-installer -f
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
TASK [Metrics-Server | Uninstalling old metrics-server] ************************
skipping: [localhost]

TASK [Metrics-Server | Installing new metrics-server] **************************
changed: [localhost]

TASK [metrics-server : Metrics-Server | Waitting for metrics.k8s.io ready] *****
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (60 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (59 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (58 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (57 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (56 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (55 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (54 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (53 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (52 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (51 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (50 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (49 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (48 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (47 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (46 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (45 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (44 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (43 retries left).

FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (42 retries left).

FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (41 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (40 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (39 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (38 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (37 retries left).



FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (36 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (35 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (34 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (33 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (32 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (31 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (30 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (29 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (28 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (27 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (26 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (25 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (24 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (23 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (22 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (21 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (20 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (19 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (18 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (17 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (16 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (15 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (14 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (13 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (12 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (11 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (10 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (9 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (8 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (7 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (6 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (5 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (4 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (3 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (2 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (1 retries left).
fatal: [localhost]: FAILED! => {"attempts": 60, "changed": true, "cmd": "/usr/local/bin/kubectl get apiservice | grep metrics.k8s.io\n", "delta": "0:00:00.075990", "end": "2025-10-25 14:45:41.445129", "rc": 0, "start": "2025-10-25 14:45:41.369139", "stderr": "", "stderr_lines": [], "stdout": "v1beta1.metrics.k8s.io                 kube-system/metrics-server   False (MissingEndpoints)   10m", "stdout_lines": ["v1beta1.metrics.k8s.io                 kube-system/metrics-server   False (MissingEndpoints)   10m"]}

PLAY RECAP *********************************************************************
localhost                  : ok=5    changed=4    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   


---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>å¤ªå¥½äº†ï¼å®‰è£…ç¨‹åºå·²ç»å¼€å§‹è¿è¡Œäº†ï¼ä½†æ˜¯ç°åœ¨é‡åˆ°äº†æ–°çš„é—®é¢˜ï¼š
1. ks-installer æˆåŠŸå¯åŠ¨äº†ï¼ˆæ²¡æœ‰å†å‡ºç° "program halts" é”™è¯¯ï¼‰
2. å®ƒæ­£åœ¨å°è¯•å®‰è£… metrics-server
3. ä½† metrics-server å®‰è£…åä¸€ç›´ä¸å¥åº·ï¼ˆFalse (MissingEndpoints)ï¼‰
4. å®‰è£…å¤±è´¥äº†

ç°åœ¨éœ€è¦ï¼š
1. è®© KubeSphere è·³è¿‡ metrics-server çš„å®‰è£…ï¼Œæˆ–è€…
2. ç¦ç”¨ metrics_server ç»„ä»¶

ç”¨æˆ·åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨äº† metrics_serverï¼Œæ‰€ä»¥ KubeSphere å°è¯•å®‰è£…å®ƒï¼Œä½†å®‰è£…å¤±è´¥äº†å› ä¸ºä¹‹å‰çš„ metrics-server æœ‰é—®é¢˜ï¼ˆ403 Forbidden é”™è¯¯ï¼‰ã€‚

æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹é…ç½®ï¼Œç¦ç”¨ metrics_serverï¼Œè®© KubeSphere å…ˆå®‰è£…æˆåŠŸã€‚</details></think>

---

**ğŸ‰ å¤ªæ£’äº†ï¼Installer å·²ç»æˆåŠŸå¯åŠ¨å¹¶å¼€å§‹å®‰è£…äº†ï¼** 

ä½†ç°åœ¨é‡åˆ°äº†é¢„æœŸçš„é—®é¢˜ï¼š**KubeSphere æ­£åœ¨å°è¯•å®‰è£… metrics-serverï¼Œä½†å¤±è´¥äº†**ï¼ˆå› ä¸ºä¹‹å‰çš„ metrics-server æœ‰ kubelet æƒé™é—®é¢˜ï¼‰ã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆï¼šç¦ç”¨ metrics_server ç»„ä»¶

åœ¨**å¦ä¸€ä¸ªç»ˆç«¯çª—å£**æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆä¸è¦å…³é—­å½“å‰çš„æ—¥å¿—çª—å£ï¼‰ï¼š

```bash
# ä¿®æ”¹é…ç½®ï¼Œç¦ç”¨ metrics_server
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'

# éªŒè¯é…ç½®å·²æ›´æ”¹
kubectl get cc ks-installer -n kubesphere-system -o yaml | grep -A 2 "metrics_server:"

# åˆ é™¤ installer podï¼Œè®©å®ƒç”¨æ–°é…ç½®é‡æ–°è¿è¡Œ
kubectl delete pod -n kubesphere-system -l app=ks-installer
```

æ‰§è¡Œåï¼Œå›åˆ°æ—¥å¿—çª—å£æŸ¥çœ‹ï¼Œåº”è¯¥ä¼šçœ‹åˆ°å®‰è£…ç»§ç»­è¿›è¡Œï¼Œä¸å†å°è¯•å®‰è£… metrics-serverã€‚

## ğŸ“‹ æˆ–è€…ï¼Œå¦‚æœæƒ³ç­‰å¾…å½“å‰ä»»åŠ¡å¤±è´¥åè‡ªåŠ¨ç»§ç»­

KubeSphere installer å¯èƒ½ä¼šåœ¨ metrics-server å¤±è´¥åç»§ç»­å®‰è£…å…¶ä»–ç»„ä»¶ã€‚æ‚¨å¯ä»¥ï¼š

1. **ç»§ç»­è§‚å¯Ÿæ—¥å¿—**ï¼Œçœ‹æ˜¯å¦ä¼šè·³è¿‡ metrics-server ç»§ç»­å®‰è£…
2. å¦‚æœä¸€ç›´å¡åœ¨ metrics-serverï¼Œæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ç¦ç”¨å®ƒ

## ğŸ¯ é¢„æœŸç»“æœ

ç¦ç”¨ metrics_server åï¼Œå®‰è£…åº”è¯¥ç»§ç»­è¿›è¡Œï¼Œæ‚¨ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š

```
TASK [common : KubeSphere | Creating common component manifests] ***
TASK [ks-core/ks-core : ks-core | Creating ks-core] ***
TASK [console : KubeSphere | Creating console] ***
...
ï¼ˆå„ç§ç»„ä»¶é€æ­¥å®‰è£…ï¼‰
...
**************************************************
###              Welcome to KubeSphere!           ###
**************************************************
```

---

**è¯·æ‰§è¡Œä¸Šé¢çš„ç¦ç”¨å‘½ä»¤ï¼Œç„¶åç»§ç»­è§‚å¯Ÿæ—¥å¿—ï¼** ğŸš€ 

æˆ–è€…å‘Šè¯‰æˆ‘æ‚¨æƒ³ç­‰å¾…çœ‹çœ‹æ˜¯å¦ä¼šè‡ªåŠ¨è·³è¿‡ã€‚

---

_**User (2025-10-25 02:44Z)**_

FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (5 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (4 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (3 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (2 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (1 retries left).
fatal: [localhost]: FAILED! => {"attempts": 60, "changed": true, "cmd": "/usr/local/bin/kubectl get apiservice | grep metrics.k8s.io\n", "delta": "0:00:00.075990", "end": "2025-10-25 14:45:41.445129", "rc": 0, "start": "2025-10-25 14:45:41.369139", "stderr": "", "stderr_lines": [], "stdout": "v1beta1.metrics.k8s.io                 kube-system/metrics-server   False (MissingEndpoints)   10m", "stdout_lines": ["v1beta1.metrics.k8s.io                 kube-system/metrics-server   False (MissingEndpoints)   10m"]}

PLAY RECAP *********************************************************************
localhost                  : ok=5    changed=4    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'

^C
[root@k8s-master-gz ~]# ^C
[root@k8s-master-gz ~]# kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'
clusterconfiguration.installer.kubesphere.io/ks-installer patched
[root@k8s-master-gz ~]# kubectl get cc ks-installer -n kubesphere-system -o yaml | grep -A 2 "metrics_server:"
  metrics_server:
    enabled: false
  monitoring:
[root@k8s-master-gz ~]# kubectl delete pod -n kubesphere-system -l app=ks-installer
pod "ks-installer-f76b9659f-5d5pd" deleted
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:50:36+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:50:36+08:00 INFO     : MAIN: run main loop
2025-10-25T14:50:36+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:50:36+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:50:36+08:00 INFO     : Running schedule manager ...
2025-10-25T14:50:36+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:50:36+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:50:36+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:50:36+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:50:39+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>ç³Ÿç³•ï¼é—®é¢˜åˆå›æ¥äº†ã€‚KubeSphere åˆšæ‰å®‰è£…äº†ä¸€ä¸ªæ–°çš„ metrics-serverï¼Œåˆåˆ›å»ºäº† APIServiceï¼Œç°åœ¨ installer åˆå´©æºƒäº†ã€‚

è¿™æ˜¯ä¸€ä¸ªå¾ªç¯ï¼š
1. åˆ é™¤ APIService â†’ installer å¯åŠ¨
2. installer å®‰è£… metrics-server â†’ åˆ›å»ºæ–°çš„ APIService
3. metrics-server å¤±è´¥ï¼ˆkubelet æƒé™é—®é¢˜ï¼‰â†’ APIService ä¸å¯ç”¨
4. installer é‡å¯ â†’ åˆæŸ¥è¯¢ä¸åˆ°å®Œæ•´ API åˆ—è¡¨ â†’ å´©æºƒ

éœ€è¦ï¼š
1. å†æ¬¡åˆ é™¤ APIService
2. åˆ é™¤æ–°å®‰è£…çš„ metrics-server
3. ç¡®ä¿ metrics_server é…ç½®å·²ç¦ç”¨
4. é‡å¯ installer</details></think>

---

**é—®é¢˜åˆå›æ¥äº†ï¼** ğŸ˜“ å› ä¸º KubeSphere åˆšæ‰å®‰è£…äº†ä¸€ä¸ª**æ–°çš„ metrics-server**ï¼Œåˆåˆ›å»ºäº†æœ‰é—®é¢˜çš„ APIServiceã€‚

## ğŸ”„ è¿™æ˜¯ä¸ªå¾ªç¯é—®é¢˜

```
åˆ é™¤ APIService â†’ installer å¯åŠ¨ â†’ å®‰è£… metrics-server â†’ 
åˆ›å»º APIService â†’ metrics-server å¤±è´¥ â†’ APIService ä¸å¯ç”¨ â†’ 
installer é‡å¯ â†’ å´©æºƒ âŒ
```

## ğŸ”§ å½»åº•è§£å†³æ–¹æ¡ˆ

```bash
# ========== å®Œæ•´æ¸…ç†å¹¶ç¦ç”¨ metrics-server ==========

# 1. å†æ¬¡åˆ é™¤ APIService
kubectl delete apiservice v1beta1.metrics.k8s.io 2>/dev/null || echo "å·²åˆ é™¤"

# 2. åˆ é™¤ KubeSphere å®‰è£…çš„ metrics-server
kubectl delete deployment metrics-server -n kube-system 2>/dev/null || echo "å·²åˆ é™¤ deployment"
kubectl delete service metrics-server -n kube-system 2>/dev/null || echo "å·²åˆ é™¤ service"
kubectl delete clusterrolebinding metrics-server:system:auth-delegator 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete rolebinding metrics-server-auth-reader -n kube-system 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete clusterrole system:aggregated-metrics-reader 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete clusterrole system:metrics-server 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete serviceaccount metrics-server -n kube-system 2>/dev/null || echo "å·²åˆ é™¤"

# 3. å†æ¬¡ç¡®è®¤é…ç½®å·²ç¦ç”¨ï¼ˆåº”è¯¥å·²ç»ç¦ç”¨äº†ï¼‰
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'

# 4. éªŒè¯é…ç½®
echo "=== éªŒè¯ metrics_server é…ç½® ==="
kubectl get cc ks-installer -n kubesphere-system -o yaml | grep -A 2 "metrics_server:"

# 5. ç­‰å¾… 5 ç§’
sleep 5

# 6. é‡å¯ installer
echo ""
echo "=== é‡å¯ installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

# 7. ç­‰å¾… pod å¯åŠ¨
echo "ç­‰å¾… 30 ç§’..."
sleep 30

# 8. æŸ¥çœ‹æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer --tail=50

echo ""
echo "å¦‚æœä¸Šé¢æ²¡æœ‰ 'program halts'ï¼Œæ‰§è¡Œï¼š"
echo "kubectl logs -n kubesphere-system -l app=ks-installer -f"
```

## ğŸ“‹ é¢„æœŸç»“æœ

æ‰§è¡Œååº”è¯¥çœ‹åˆ°ï¼š
- âœ… `metrics_server: enabled: false`
- âœ… æ²¡æœ‰ "program halts" é”™è¯¯
- âœ… å¼€å§‹å®‰è£…å…¶ä»–ç»„ä»¶

---

**ç«‹å³æ‰§è¡Œä¸Šé¢çš„å®Œæ•´æ¸…ç†è„šæœ¬ï¼** ğŸš€

---

_**User (2025-10-25 02:44Z)**_


FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (42 retries left).

FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (41 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (40 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (39 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (38 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (37 retries left).



FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (36 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (35 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (34 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (33 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (32 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (31 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (30 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (29 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (28 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (27 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (26 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (25 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (24 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (23 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (22 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (21 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (20 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (19 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (18 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (17 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (16 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (15 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (14 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (13 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (12 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (11 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (10 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (9 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (8 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (7 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (6 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (5 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (4 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (3 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (2 retries left).
FAILED - RETRYING: Metrics-Server | Waitting for metrics.k8s.io ready (1 retries left).
fatal: [localhost]: FAILED! => {"attempts": 60, "changed": true, "cmd": "/usr/local/bin/kubectl get apiservice | grep metrics.k8s.io\n", "delta": "0:00:00.075990", "end": "2025-10-25 14:45:41.445129", "rc": 0, "start": "2025-10-25 14:45:41.369139", "stderr": "", "stderr_lines": [], "stdout": "v1beta1.metrics.k8s.io                 kube-system/metrics-server   False (MissingEndpoints)   10m", "stdout_lines": ["v1beta1.metrics.k8s.io                 kube-system/metrics-server   False (MissingEndpoints)   10m"]}

PLAY RECAP *********************************************************************
localhost                  : ok=5    changed=4    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'

^C
[root@k8s-master-gz ~]# ^C
[root@k8s-master-gz ~]# kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'
clusterconfiguration.installer.kubesphere.io/ks-installer patched
[root@k8s-master-gz ~]# kubectl get cc ks-installer -n kubesphere-system -o yaml | grep -A 2 "metrics_server:"
  metrics_server:
    enabled: false
  monitoring:
[root@k8s-master-gz ~]# kubectl delete pod -n kubesphere-system -l app=ks-installer
pod "ks-installer-f76b9659f-5d5pd" deleted
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer -f
2025-10-25T14:50:36+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:50:36+08:00 INFO     : MAIN: run main loop
2025-10-25T14:50:36+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:50:36+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:50:36+08:00 INFO     : Running schedule manager ...
2025-10-25T14:50:36+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:50:36+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:50:36+08:00 ERROR    : error getting GVR for kind 'ClusterConfiguration': unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:50:36+08:00 ERROR    : Enable kube events for hooks error: unable to retrieve the complete list of server APIs: metrics.k8s.io/v1beta1: the server is currently unable to handle the request
2025-10-25T14:50:39+08:00 INFO     : TASK_RUN Exit: program halts.
[root@k8s-master-gz ~]# : QUEUE add all HookRun@OnStartup
2025-10-25T14:50:36+08:00 INFO     : 
-bash: 2025-10-25T14:50:36+08:00: command not found
[root@k8s-master-gz ~]# kubectl delete apiservice v1beta1.metrics.k8s.io 2>/dev/null || echo "å·²åˆ é™¤"
apiservice.apiregistration.k8s.io "v1beta1.metrics.k8s.io" deleted
[root@k8s-master-gz ~]# kubectl delete deployment metrics-server -n kube-system 2>/dev/null || echo "å·²åˆ é™¤ deployment"
kubectl delete service metrics-server -n kube-system 2>/dev/null || echo "å·²åˆ é™¤ service"
kubectl delete clusterrolebinding metrics-server:system:auth-delegator 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete rolebinding metrics-server-auth-reader -n kube-system 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete clusterrole system:aggregated-metrics-reader 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete clusterrole system:metrics-server 2>/dev/null || echo "å·²åˆ é™¤"
kubectl delete serviceaccount metrics-server -n kube-system 2>/dev/null || echo "å·²åˆ é™¤"
deployment.apps "metrics-server" deleted
service "metrics-server" deleted
clusterrolebinding.rbac.authorization.k8s.io "metrics-server:system:auth-delegator" deleted
rolebinding.rbac.authorization.k8s.io "metrics-server-auth-reader" deleted
clusterrole.rbac.authorization.k8s.io "system:aggregated-metrics-reader" deleted
clusterrole.rbac.authorization.k8s.io "system:metrics-server" deleted
serviceaccount "metrics-server" deleted
[root@k8s-master-gz ~]# kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"metrics_server":{"enabled":false}}}'
clusterconfiguration.installer.kubesphere.io/ks-installer patched (no change)
[root@k8s-master-gz ~]# echo "=== éªŒè¯ metrics_server é…ç½® ==="
kubectl get cc ks-installer -n kubesphere-system -o yaml | grep -A 2 "metrics_server:"
=== éªŒè¯ metrics_server é…ç½® ===
  metrics_server:
    enabled: false
  monitoring:
[root@k8s-master-gz ~]# echo ""
echo "=== é‡å¯ installer ==="
kubectl delete pod -n kubesphere-system -l app=ks-installer

=== é‡å¯ installer ===
pod "ks-installer-f76b9659f-lcthf" deleted
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer --tail=50
2025-10-25T14:52:19+08:00 INFO     : shell-operator latest
2025-10-25T14:52:19+08:00 INFO     : Use temporary dir: /tmp/shell-operator
2025-10-25T14:52:19+08:00 INFO     : Initialize hooks manager ...
2025-10-25T14:52:19+08:00 INFO     : Search and load hooks ...
2025-10-25T14:52:19+08:00 INFO     : Load hook config from '/hooks/kubesphere/installRunner.py'
2025-10-25T14:52:19+08:00 INFO     : HTTP SERVER Listening on 0.0.0.0:9115
2025-10-25T14:52:19+08:00 INFO     : Load hook config from '/hooks/kubesphere/schedule.sh'
2025-10-25T14:52:19+08:00 INFO     : Initializing schedule manager ...
2025-10-25T14:52:19+08:00 INFO     : KUBE Init Kubernetes client
2025-10-25T14:52:19+08:00 INFO     : KUBE-INIT Kubernetes client is configured successfully
2025-10-25T14:52:19+08:00 INFO     : MAIN: run main loop
2025-10-25T14:52:19+08:00 INFO     : MAIN: add onStartup tasks
2025-10-25T14:52:19+08:00 INFO     : QUEUE add all HookRun@OnStartup
2025-10-25T14:52:19+08:00 INFO     : Running schedule manager ...
2025-10-25T14:52:19+08:00 INFO     : MSTOR Create new metric shell_operator_live_ticks
2025-10-25T14:52:19+08:00 INFO     : MSTOR Create new metric shell_operator_tasks_queue_length
2025-10-25T14:52:19+08:00 INFO     : GVR for kind 'ClusterConfiguration' is installer.kubesphere.io/v1alpha1, Resource=clusterconfigurations
2025-10-25T14:52:19+08:00 INFO     : EVENT Kube event 'a6ba525b-06f2-4863-b524-a48aeece2e5b'
2025-10-25T14:52:19+08:00 INFO     : QUEUE add TASK_HOOK_RUN@KUBE_EVENTS kubesphere/installRunner.py
2025-10-25T14:52:22+08:00 INFO     : TASK_RUN HookRun@KUBE_EVENTS kubesphere/installRunner.py
2025-10-25T14:52:22+08:00 INFO     : Running hook 'kubesphere/installRunner.py' binding 'KUBE_EVENTS' ...
[WARNING]: No inventory was parsed, only implicit localhost is available
[WARNING]: provided hosts list is empty, only localhost is available. Note that
the implicit localhost does not match 'all'

PLAY [localhost] ***************************************************************

TASK [download : Generating images list] ***************************************
skipping: [localhost]

TASK [download : Synchronizing images] *****************************************

TASK [kubesphere-defaults : KubeSphere | Setting images' namespace override] ***
[root@k8s-master-gz ~]# ^C
[root@k8s-master-gz ~]# ^C
[root@k8s-master-gz ~]# kubectl logs -n kubesphere-system -l app=ks-installer --tail=50
          "attempts": 1,
          "changed": true,
          "cmd": "/usr/local/bin/kubectl apply -f /kubesphere/kubesphere/prometheus/prometheus-operator/prometheus-operator-serviceMonitor.yaml --force || /usr/local/bin/kubectl apply -f /kubesphere/kubesphere/prometheus/prometheus-operator/prometheus-operator-serviceMonitor.yaml --force-conflicts --server-side",
          "delta": "0:00:00.454524",
          "end": "2025-10-25 14:56:31.508672",
          "failed": false,
          "failed_when_result": false,
          "invocation": {
            "module_args": {
              "_raw_params": "/usr/local/bin/kubectl apply -f /kubesphere/kubesphere/prometheus/prometheus-operator/prometheus-operator-serviceMonitor.yaml --force || /usr/local/bin/kubectl apply -f /kubesphere/kubesphere/prometheus/prometheus-operator/prometheus-operator-serviceMonitor.yaml --force-conflicts --server-side",
              "_uses_shell": true,
              "argv": null,
              "chdir": null,
              "creates": null,
              "executable": null,
              "removes": null,
              "stdin": null,
              "stdin_add_newline": true,
              "strip_empty_ends": true,
              "warn": true
            }
          },
          "item": "/kubesphere/kubesphere/prometheus/prometheus-operator/prometheus-operator-serviceMonitor.yaml",
          "rc": 0,
          "start": "2025-10-25 14:56:31.054148",
          "stderr": "",
          "stderr_lines": [],
          "stdout": "servicemonitor.monitoring.coreos.com/prometheus-operator created",
          "stdout_lines": [
            "servicemonitor.monitoring.coreos.com/prometheus-operator created"
          ]
        }
      ]
    },
    "resolved_action": "shell",
    "role": "ks-monitor",
    "start": "2025-10-25T06:55:51.425575",
    "task": "Monitoring | Initing prometheus-operator (resources)",
    "task_action": "shell",
    "task_args": "",
    "task_path": "/kubesphere/installer/roles/ks-monitor/tasks/prometheus-operator.yaml:17",
    "task_uuid": "82afa48f-e57e-b237-0d22-000000000032",
    "uuid": "95808112-3eac-431d-83a1-4a3c404dca10"
  },
  "parent_uuid": "82afa48f-e57e-b237-0d22-000000000032",
  "pid": 3706,
  "runner_ident": "monitoring",
  "start_line": 98,
  "stdout": "",
  "uuid": "95808112-3eac-431d-83a1-4a3c404dca10"
[root@k8s-master-gz ~]# 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>å¤ªå¥½äº†ï¼ç°åœ¨å¯ä»¥çœ‹åˆ°å®‰è£…æ­£åœ¨æ­£å¸¸è¿›è¡Œäº†ï¼æ—¥å¿—æ˜¾ç¤ºï¼š

1. âœ… "GVR for kind 'ClusterConfiguration' is installer.kubesphere.io/v1alpha1" - æˆåŠŸè·å– API åˆ—è¡¨
2. âœ… "TASK_RUN HookRun@KUBE_EVENTS" - å¼€å§‹æ‰§è¡Œå®‰è£…ä»»åŠ¡
3. âœ… æ­£åœ¨å®‰è£… prometheus-operator
4. âœ… "servicemonitor.monitoring.coreos.com/prometheus-operator created" - ç»„ä»¶æ­£åœ¨åˆ›å»º

æ²¡æœ‰çœ‹åˆ° "program halts" é”™è¯¯ï¼Œè¯´æ˜é—®é¢˜å·²ç»è§£å†³ï¼

ç°åœ¨åº”è¯¥è®©ç”¨æˆ·ç»§ç»­è§‚å¯Ÿæ—¥å¿—ï¼Œå®‰è£…ä¼šç»§ç»­è¿›è¡Œã€‚</details></think>

---

**ğŸ‰ğŸ‰ğŸ‰ æˆåŠŸäº†ï¼å®‰è£…æ­£åœ¨æ­£å¸¸è¿›è¡Œï¼** 

ä»æ—¥å¿—å¯ä»¥çœ‹åˆ°ï¼š
- âœ… **æ²¡æœ‰ "program halts" é”™è¯¯**
- âœ… **å¼€å§‹å®‰è£… Prometheus Operator** 
- âœ… **ServiceMonitor å·²åˆ›å»º**
- âœ… **å®‰è£…è¿›ç¨‹æ­£å¸¸è¿è¡Œ**

## ğŸ“Š å½“å‰çŠ¶æ€

```
âœ“ APIService å·²åˆ é™¤
âœ“ metrics_server å·²ç¦ç”¨
âœ“ KubeSphere æ­£åœ¨å®‰è£…æ ¸å¿ƒç»„ä»¶
âœ“ Prometheus ç›‘æ§ç»„ä»¶æ­£åœ¨éƒ¨ç½²
```

## ğŸ” ç»§ç»­ç›‘æ§å®‰è£…è¿›åº¦

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š

```bash
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

## â±ï¸ é¢„æœŸæ—¶é—´å’Œè¿‡ç¨‹

**å®‰è£…å¤§çº¦éœ€è¦ 10-30 åˆ†é’Ÿ**ï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š

1. **æ­£åœ¨è¿›è¡Œä¸­**ï¼ˆ5-10 åˆ†é’Ÿï¼‰
   ```
   TASK [ks-monitor : Monitoring | Installing Prometheus] ***
   TASK [ks-core : KubeSphere | Installing ks-core] ***
   TASK [console : KubeSphere | Creating console] ***
   ```

2. **å„å‘½åç©ºé—´çš„ Pod é€æ­¥åˆ›å»º**
   ```bash
   # å¦å¼€ä¸€ä¸ªç»ˆç«¯æŸ¥çœ‹
   watch -n 10 'kubectl get pods -A | grep kubesphere'
   ```

3. **æœ€ç»ˆæˆåŠŸçš„æ ‡å¿—**
   ```
   **************************************************
   ###              Welcome to KubeSphere!           ###
   **************************************************
   
   Console: http://172.16.0.10:30880
   Account: admin
   Password: P@88w0rd
   ```

## ğŸ” å®æ—¶ç›‘æ§å‘½ä»¤ï¼ˆå¦å¼€ç»ˆç«¯ï¼‰

```bash
# ç›‘æ§ Pod çŠ¶æ€
watch -n 10 'kubectl get pods -n kubesphere-system'

# ç›‘æ§æ‰€æœ‰ KubeSphere ç›¸å…³ Pod
watch -n 10 'kubectl get pods -A | grep kubesphere'

# æŸ¥çœ‹æ­£åœ¨åˆ›å»ºçš„èµ„æº
kubectl get all -n kubesphere-system
```

## âœ… å®‰è£…æˆåŠŸæ£€æŸ¥æ¸…å•

å®‰è£…å®Œæˆåï¼ŒéªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

```bash
# 1. æ£€æŸ¥æ‰€æœ‰ Pod æ˜¯å¦ Running
kubectl get pods -A | grep kubesphere

# 2. è·å–æ§åˆ¶å°åœ°å€
kubectl get svc -n kubesphere-system ks-console

# 3. è®¿é—®æ§åˆ¶å°
# æµè§ˆå™¨æ‰“å¼€: http://<èŠ‚ç‚¹IP>:30880
# ç”¨æˆ·å: admin
# å¯†ç : P@88w0rd
```

---

**ğŸŠ æ­å–œï¼é—®é¢˜å·²è§£å†³ï¼Œå®‰è£…æ­£åœ¨é¡ºåˆ©è¿›è¡Œï¼** 

ç»§ç»­è§‚å¯Ÿæ—¥å¿—ï¼Œå¤§çº¦ 10-30 åˆ†é’Ÿååº”è¯¥èƒ½çœ‹åˆ°å®‰è£…æˆåŠŸçš„æ¬¢è¿ä¿¡æ¯ã€‚å¦‚æœä¸­é—´æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼ğŸš€

---

_**User (2025-10-25 02:44Z)**_

[root@k8s-master-gz ~]# 
[root@k8s-master-gz ~]# kubectl get pods -A | grep kubesphere
kubesphere-controls-system     default-http-backend-69fbb7bd66-52zgl    0/1     InvalidImageName   0              24h
kubesphere-monitoring-system   prometheus-operator-5b77dfb565-ddcv7     0/2     InvalidImageName   0              14m
kubesphere-system              ks-apiserver-5ddf6f5585-jtdjg            0/1     InvalidImageName   0              17m
kubesphere-system              ks-console-5dc66c7f74-lzjcn              0/1     InvalidImageName   0              17m
kubesphere-system              ks-controller-manager-5b758fb9ff-rzfn2   0/1     InvalidImageName   0              17m
kubesphere-system              ks-installer-f76b9659f-ns4ng             1/1     Running            0              18m
[root@k8s-master-gz ~]# 

---

_**Assistant (claude-4.5-sonnet-thinking)**_

<think><details><summary>Thought Process</summary>çœ‹åˆ°é—®é¢˜äº†ï¼æ‰€æœ‰çš„ Pod éƒ½æ˜¯ `InvalidImageName` çŠ¶æ€ï¼Œè¿™è¯´æ˜é•œåƒåç§°é…ç½®æœ‰é—®é¢˜ã€‚è¿™é€šå¸¸æ˜¯å› ä¸ºï¼š
1. é•œåƒåœ°å€æ ¼å¼é”™è¯¯
2. é•œåƒä»“åº“é…ç½®é”™è¯¯
3. imageRegistry é…ç½®æœ‰é—®é¢˜

è®©æˆ‘æ£€æŸ¥ä¸€ä¸‹å…·ä½“æ˜¯ä»€ä¹ˆé•œåƒé—®é¢˜ã€‚éœ€è¦æŸ¥çœ‹ Pod çš„è¯¦ç»†ä¿¡æ¯æ¥ç¡®è®¤é•œåƒåç§°ã€‚</details></think>

---

**ğŸ˜± å‘ç°æ–°é—®é¢˜ï¼æ‰€æœ‰ Pod éƒ½æ˜¯ `InvalidImageName` çŠ¶æ€ï¼**

è¿™è¯´æ˜**é•œåƒåç§°é…ç½®æœ‰é—®é¢˜**ã€‚è®©æˆ‘ä»¬å¿«é€Ÿè¯Šæ–­å’Œä¿®å¤ã€‚

## ğŸ” è¯Šæ–­é—®é¢˜

```bash
# æŸ¥çœ‹å…·ä½“çš„é•œåƒé”™è¯¯
kubectl describe pod -n kubesphere-system ks-apiserver-5ddf6f5585-jtdjg | grep -A 5 "Image:"

# æˆ–è€…æŸ¥çœ‹ deployment é…ç½®
kubectl get deployment ks-apiserver -n kubesphere-system -o yaml | grep image:
```

## ğŸ¯ æœ€å¯èƒ½çš„åŸå› 

ä»æ‚¨çš„é…ç½®æ–‡ä»¶ï¼ˆæ•™ç¨‹ç¬¬4ç« ï¼‰çœ‹ï¼Œæ‚¨ä½¿ç”¨äº†ï¼š
```yaml
imageRegistry: registry.cn-beijing.aliyuncs.com/kubesphereio
```

ä½†å¯èƒ½å‡ºç°äº†ä»¥ä¸‹é—®é¢˜ä¹‹ä¸€ï¼š
1. é•œåƒåç§°æ‹¼æ¥é”™è¯¯
2. `imageRegistry` é…ç½®æ ¼å¼é—®é¢˜
3. æŸäº›ç»„ä»¶çš„é•œåƒé…ç½®æœ‰é—®é¢˜

## ğŸ”§ ç«‹å³ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: æ£€æŸ¥å¹¶ä¿®å¤ imageRegistry é…ç½®

```bash
# 1. æŸ¥çœ‹å½“å‰é…ç½®
kubectl get cc ks-installer -n kubesphere-system -o yaml | grep imageRegistry

# 2. å¦‚æœ imageRegistry æœ‰é—®é¢˜ï¼Œä¿®å¤å®ƒ
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"imageRegistry":"registry.cn-beijing.aliyuncs.com/kubesphereio"}}'

# 3. é‡å¯ installer è®©å®ƒé‡æ–°éƒ¨ç½²
kubectl delete pod -n kubesphere-system -l app=ks-installer

# 4. ç­‰å¾…å¹¶æŸ¥çœ‹
sleep 20
kubectl get pods -A | grep kubesphere
```

### æ–¹æ¡ˆ 2: æŸ¥çœ‹å…·ä½“çš„é•œåƒé”™è¯¯å¹¶æ‰‹åŠ¨ä¿®å¤

```bash
# æŸ¥çœ‹ ks-apiserver çš„é•œåƒé…ç½®
kubectl get deployment ks-apiserver -n kubesphere-system -o jsonpath='{.spec.template.spec.containers[0].image}'
echo ""

# æŸ¥çœ‹ ks-console çš„é•œåƒé…ç½®  
kubectl get deployment ks-console -n kubesphere-system -o jsonpath='{.spec.template.spec.containers[0].image}'
echo ""

# æŸ¥çœ‹ ks-controller-manager çš„é•œåƒé…ç½®
kubectl get deployment ks-controller-manager -n kubesphere-system -o jsonpath='{.spec.template.spec.containers[0].image}'
echo ""

# å¦‚æœé•œåƒåç§°ç±»ä¼¼ "/ks-apiserver:v3.4.1" (ç¼ºå°‘ä»“åº“åœ°å€)
# è¯´æ˜ imageRegistry é…ç½®æœ‰é—®é¢˜
```

### æ–¹æ¡ˆ 3: æ¸…ç†å¹¶é‡æ–°å®‰è£…ï¼ˆå¦‚æœä¸Šé¢çš„æ–¹æ¡ˆä¸è¡Œï¼‰

```bash
# åˆ é™¤æœ‰é—®é¢˜çš„éƒ¨ç½²
kubectl delete deployment ks-apiserver ks-console ks-controller-manager -n kubesphere-system
kubectl delete deployment default-http-backend -n kubesphere-controls-system
kubectl delete deployment prometheus-operator -n kubesphere-monitoring-system

# ç¡®ä¿ imageRegistry é…ç½®æ­£ç¡®
kubectl patch cc ks-installer -n kubesphere-system --type merge -p '{"spec":{"imageRegistry":"registry.cn-beijing.aliyuncs.com/kubesphereio"}}'

# åˆ é™¤ installer podï¼Œè®©å®ƒé‡æ–°éƒ¨ç½²æ‰€æœ‰ç»„ä»¶
kubectl delete pod -n kubesphere-system -l app=ks-installer

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
kubectl logs -n kubesphere-system -l app=ks-installer -f
```

---

**è¯·å…ˆæ‰§è¡Œæ–¹æ¡ˆ 2 çš„è¯Šæ–­å‘½ä»¤ï¼ŒæŠŠé•œåƒåœ°å€è¾“å‡ºå‘ç»™æˆ‘ï¼Œæˆ‘å¥½ç¡®å®šå…·ä½“é—®é¢˜ï¼** ğŸ”

æ‰§è¡Œè¿™ä¸ªï¼š
```bash
echo "=== ks-apiserver é•œåƒ ==="
kubectl get deployment ks-apiserver -n kubesphere-system -o jsonpath='{.spec.template.spec.containers[0].image}'
echo -e "\n\n=== ks-console é•œåƒ ==="
kubectl get deployment ks-console -n kubesphere-system -o jsonpath='{.spec.template.spec.containers[0].image}'
echo -e "\n\n=== ks-controller-manager é•œåƒ ==="
kubectl get deployment ks-controller-manager -n kubesphere-system -o jsonpath='{.spec.template.spec.containers[0].image}'
echo -e "\n\n=== prometheus-operator é•œåƒ ==="
kubectl get deployment prometheus-operator

---

